\documentclass[aspectratio=169]{beamer}

% Tema e cores baseados no design do site ArboGraph
\usetheme{CambridgeUS}
\usecolortheme{default}

% Paleta de cores do logo e site
\definecolor{primarypurple}{RGB}{53, 43, 103}    % #352B67 - roxo escuro principal
\definecolor{secondarypurple}{RGB}{75, 66, 119}  % #4B4277 - roxo médio
\definecolor{accentpurple}{RGB}{141, 121, 229}   % #8d79e5 - roxo vibrante
\definecolor{lightpurple}{RGB}{164, 156, 255}    % #a49cc5ff - roxo claro (borda)
\definecolor{textgray}{RGB}{120, 116, 134}       % #787486 - cinza texto
\definecolor{textlightgray}{RGB}{151, 149, 160}       % rgba(151, 149, 160, 1)

\definecolor{lightgray}{RGB}{229, 229, 229}      % #E5E5E5 - fundo claro
\definecolor{divider}{RGB}{219, 219, 219}        % #DBDBDB - linhas divisórias

% Estrutura geral
\setbeamercolor{structure}{fg=primarypurple}
\setbeamercolor{palette primary}{bg=primarypurple,fg=white}
\setbeamercolor{palette secondary}{bg=secondarypurple,fg=white}
\setbeamercolor{palette tertiary}{bg=accentpurple,fg=white}
\setbeamercolor{frametitle}{bg=primarypurple,fg=white}

% Cores da capa
\setbeamercolor{title}{fg=lightgray}
\setbeamercolor{titlelike}{bg=primarypurple,fg=white}
\setbeamercolor{author}{fg=textgray}
\setbeamercolor{institute}{fg=textgray}
\setbeamercolor{date}{fg=textgray}

% Cores dos blocos (caixas de texto)
\setbeamercolor{block title}{bg=secondarypurple,fg=white}
\setbeamercolor{block body}{bg=lightgray,fg=black}
\setbeamercolor{block title alerted}{bg=secondarypurple,fg=white}
\setbeamercolor{block body alerted}{bg=lightgray,fg=black}

% Itens e enumerações
\setbeamercolor{item}{fg=accentpurple}
\setbeamercolor{enumerate item}{fg=accentpurple}
\setbeamercolor{enumerate subitem}{fg=lightpurple}

% Remover sombra dos blocos
\setbeamertemplate{blocks}[rounded][shadow=false]

% Remover "Figura" dos captions
\setbeamertemplate{caption}{\raggedright\insertcaption\par}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[brazil]{babel}
\usepackage{amsmath,amssymb}
\usepackage{graphicx}
\usepackage{tikz}
\usetikzlibrary{graphs,arrows.meta,positioning,fit,calc}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{xcolor}
\usepackage{booktabs}
\usepackage{listings}

% Controle de exibição dos slides de implementação
\newif\ifshowimplementation
% Mudar para \showimplementationtrue para exibir
\showimplementationfalse  

% Configuração do listings para código Python
\lstset{
	language=Python,
	basicstyle=\ttfamily\scriptsize,
	backgroundcolor=\color{lightgray},
	frame=single,
	rulecolor=\color{primarypurple},
	framesep=3pt,
	framexleftmargin=3pt,
	xleftmargin=5pt,
	xrightmargin=5pt,
	aboveskip=5pt,
	belowskip=5pt,
	keywordstyle=\color{primarypurple}\bfseries,
	commentstyle=\color{textgray}\itshape,
	stringstyle=\color{accentpurple},
	showstringspaces=false,
	breaklines=true,
	breakindent=10pt,
	tabsize=4
}

% Logo da UFABC no canto superior direito (após carregar tikz)
% \addtobeamertemplate{frametitle}{}{%
% 	\begin{tikzpicture}[remember picture,overlay]
% 		\node[anchor=north east,yshift=-40pt,xshift=-3pt] at (current page.north east) {
% 			\includegraphics[height=0.8cm]{logo-ufabc.png}
% 		};
% 	\end{tikzpicture}
% }

% Logo da UFABC apenas na capa
\titlegraphic{
	\begin{tikzpicture}[remember picture,overlay]
		\node[anchor=north east,yshift=-12pt,xshift=-213pt] at (current page.north east) {
			\includegraphics[height=0.8cm]{logo-ufabc.png}
		};
	\end{tikzpicture}
}

% Configurações do título
\title[Projeto de Graduação de Curso]{Algoritmos para r-Arborescências Geradoras Mínimas em Digrafos:}
\subtitle{Uma Aplicação Web Interativa}
\author[L. Sampaio, S. Haddad]{Lorena Sampaio, Samira Haddad \\ Orientador: Prof. Dr. Mário Leston Rey}
\institute[UFABC]{Universidade Federal do ABC \\ Centro de Matemática, Computação e Cognição}
\date{\today}

% Comandos personalizados
\newcommand{\G}{\mathcal{G}}
\newcommand{\D}{\mathcal{D}}

% Diagrama de referência para comparação
\newcommand{\referencediagram}{
  \begin{tikzpicture}[remember picture,overlay]
    \node[anchor=north east, xshift=-0.cm, yshift=0.2cm] at (current page.north east) {
      \begin{tikzpicture}[scale=0.65, >=Stealth,
          v/.style={circle, draw, fill=blue!8, minimum size=6mm, font=\scriptsize},
          edge/.style={->, draw=gray!60}]
       
        % Background expandido para incluir todos os elementos (desenhado primeiro)
        \fill[white, rounded corners] (-1.0,-2.2) rectangle (4.2,2.5);

        \node[v] (r) at (0,0) {$r$};
        \node[v] (a) at (2.2,0) {$a$};
        \node[v] (b) at (3.5,1.2) {$b$};
        \node[v] (c) at (3.5,-1.2) {$c$};
        
        \draw[edge] (a) to[bend left=12] node[midway, above, sloped, font=\scriptsize] {3} (b);
        \draw[edge] (b) to[bend left=12] node[midway, right, font=\scriptsize] {2} (c);
        \draw[edge] (c) to[bend left=14] node[midway, below, sloped, font=\scriptsize] {3} (a);
        \draw[edge] (r) to[bend left=8] node[midway, above, sloped, font=\scriptsize] {3} (a);
        \draw[edge] (r) to[bend left=18] node[midway, above, sloped, font=\scriptsize] {4} (b);
        \draw[edge] (r) to[bend right=10] node[midway, below, sloped, font=\scriptsize] {5} (c);
        
        % Frame correspondente ao fundo
        \draw[primarypurple, very thick, rounded corners] (-1.0,-2.2) rectangle (4.2,2.8);
        % Título posicionado por cima de tudo
        \node[font=\scriptsize\bfseries, color=primarypurple] at (3.5,2.5) {Digrafo Original};
        
      \end{tikzpicture}
    };
  \end{tikzpicture}
}

\begin{document}

% ==================== SLIDE 1: TÍTULO ====================
\begin{frame}
  \titlepage
\end{frame}

% ==================== SLIDE 2: SUMÁRIO ====================
\begin{frame}{Sumário}
  \tableofcontents
\end{frame}

% ==================== SEÇÃO 1: INTRODUÇÃO ====================
\section{Introdução}

\begin{frame}{O Problema}
  \begin{block}{Encontrar uma $r$-Arborescência Geradora de Peso Mínimo}
    Dado um $r$-digrafo ponderado $(D,w,r)$:
    \begin{itemize}
      \item Encontrar uma $r$-arborescência geradora de peso mínimo de $D$
    \end{itemize}
  \end{block}

  \vspace{0.5cm}

  \textbf{Algoritmos estudados:}
  \begin{enumerate}
    \item Chu-Liu-Edmonds (1965-67)
    \item András Frank (1981-2014)
  \end{enumerate}
\end{frame}

% ==================== SLIDE 3: EXEMPLO ====================
\begin{frame}{Exemplo: $r$-Arborescência Geradora Mínima}
  \begin{columns}[c]
    \column{0.3\textwidth}
    \begin{figure}[H]
      \begin{tikzpicture}[scale=0.9,
          vertex/.style={circle,draw,fill=blue!10,minimum size=0.6cm,font=\small},
          edge/.style={->,>=stealth,thick,gray!90}]

        \node[vertex,fill=red!20] (r) at (2,2.5) {$r$};
        \node[vertex] (a) at (0,1) {$a$};
        \node[vertex] (b) at (2,1) {$b$};
        \node[vertex] (c) at (4,1) {$c$};
        \node[vertex] (d) at (1,0) {$d$};
        \node[vertex] (e) at (3,0) {$e$};

        \draw[edge] (r) -- node[above left,font=\tiny] {3} (a);
        \draw[edge] (r) -- node[above left,font=\tiny] {5} (b);
        \draw[edge] (r) -- node[above right,font=\tiny] {4} (c);
        \draw[edge] (a) -- node[left,font=\tiny] {2} (d);
        \draw[edge] (b) -- node[above,font=\tiny] {1} (a);
        \draw[edge] (b) -- node[above,font=\tiny] {3} (d);
        \draw[edge] (c) -- node[right,font=\tiny] {2} (e);
        \draw[edge] (c) -- node[above,font=\tiny] {4} (b);
        \draw[edge] (d) to[bend left] node[below,font=\tiny] {1} (e);
      \end{tikzpicture}
      \caption{Digrafo Original}
      \caption{}
    \end{figure}

    \column{0.4\textwidth}
    \begin{figure}[H]
      \begin{tikzpicture}[scale=0.9,
          vertex/.style={circle,draw,fill=blue!10,minimum size=0.6cm,font=\small},
          arb/.style={->,>=stealth,very thick,accentpurple}]

        \node[vertex,fill=red!20] (r) at (2,2.5) {$r$};
        \node[vertex] (a) at (0,1) {$a$};
        \node[vertex] (b) at (2,1) {$b$};
        \node[vertex] (c) at (4,1) {$c$};
        \node[vertex] (d) at (1,0) {$d$};
        \node[vertex] (e) at (3,0) {$e$};

        \draw[arb] (r) -- node[above left,font=\tiny,black] {3} (a);
        \draw[arb] (r) -- node[above right,font=\tiny,black] {4} (c);
        \draw[arb] (a) -- node[left,font=\tiny,black] {2} (d);
        \draw[arb] (c) -- node[right,font=\tiny,black] {2} (e);
        \draw[arb] (c) -- node[above,font=\tiny,black] {4} (b);
      \end{tikzpicture}
      \caption{r-Arborescência Geradora}
      \caption{Peso: 16}
    \end{figure}

    \column{0.3\textwidth}
    \begin{figure}[H]
      \begin{tikzpicture}[scale=0.9,
          vertex/.style={circle,draw,fill=blue!10,minimum size=0.6cm,font=\small},
          arb/.style={->,>=stealth,very thick,accentpurple}]

        \node[vertex,fill=red!20] (r) at (2,2.5) {$r$};
        \node[vertex] (a) at (0,1) {$a$};
        \node[vertex] (b) at (2,1) {$b$};
        \node[vertex] (c) at (4,1) {$c$};
        \node[vertex] (d) at (1,0) {$d$};
        \node[vertex] (e) at (3,0) {$e$};

        \draw[arb] (r) -- node[above left,font=\tiny,black] {5} (b);
        \draw[arb] (r) -- node[above right,font=\tiny,black] {4} (c);
        \draw[arb] (b) -- node[above,font=\tiny,black] {1} (a);
        \draw[arb] (a) -- node[left,font=\tiny,black] {2} (d);
        \draw[arb] (d) -- node[below,font=\tiny,black] {1} (e);
      \end{tikzpicture}
      \caption{Geradora Mínima}
      \caption{Peso: 13}
    \end{figure}
  \end{columns}
\end{frame}

\begin{frame}{Intermissão}
  \begin{center}
    \LARGE
    Algoritmo de Chu-Liu-Edmonds
  \end{center}
\end{frame}

% ==================== SEÇÃO 2: CHU-LIU-EDMONDS ====================
\section{Algoritmo de Chu-Liu-Edmonds}

\begin{frame}{Encontrando uma $r$-Arborescência Geradora Mínima}
  \begin{columns}[c]
    \column{0.20\textwidth}
    \column{0.70\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, yshift=1cm,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        cheap/.style={->, very thick, draw=blue!70},
        expensive/.style={->, draw=gray!60}]
      \node[v] (r) {\small $r$};
      \node[v] (a) [right=2.2cm of r] {\small $a$};
      \node[v] (b) [above right=1.2cm and 1.6cm of a] {\small $b$};
      \node[v] (c) [below right=1.2cm and 1.6cm of a] {\small $c$};

      \draw[expensive] (a) to[bend left=12] node[midway, above, sloped] {\scriptsize 3} (b);
      \draw[expensive] (b) to[bend left=12] node[midway, above, sloped] {\scriptsize 2} (c);
      \draw[expensive] (c) to[bend left=14] node[midway, below, sloped] {\scriptsize 3} (a);

      \draw[expensive] (r) to[bend left=8] node[midway, above, sloped] {\scriptsize 3} (a);
      \draw[expensive] (r) to[bend left=18] node[midway, above, sloped] {\scriptsize 4} (b);
      \draw[expensive] (r) to[bend right=10] node[midway, below, sloped] {\scriptsize 5} (c);
    \end{tikzpicture}
  \end{columns}
\end{frame}

\begin{frame}{Motivação}
  %\referencediagram
  \begin{columns}[c]
    \column{0.48\textwidth}
    \textbf{Objetivo:}

    Para cada $v \neq r$, escolher um arco $a_v$ de peso mínimo que entra em $v$ e forma a arborescência:
    $$T := \{a_v : v \in V \setminus \{r\}\}$$

    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=1.6cm, yshift=1.5cm,
        v/.style={circle, draw, fill=blue!8, minimum size=6mm},
        cheap/.style={->, very thick, draw=blue!70},
        expensive/.style={->, draw=gray!60}]
      \node[v] (r) {\small $r$};
      \node[v] (a) [right=1.8cm of r] {\small $a$};
      \node[v] (b) [above right=1.0cm and 1.3cm of a] {\small $b$};
      \node[v] (c) [below right=1.0cm and 1.3cm of a] {\small $c$};

      \draw[cheap] (a) to[bend left=12] node[midway, above, sloped] {\scriptsize 3} (b);
      \draw[cheap] (b) to[bend left=12] node[midway, above, sloped] {\scriptsize 2} (c);
      \draw[expensive] (c) to[bend left=14] node[midway, below, sloped] {\scriptsize 3} (a);

      \draw[cheap] (r) to[bend left=8] node[midway, above, sloped] {\scriptsize 3} (a);
      \draw[expensive] (r) to[bend left=18] node[midway, above, sloped] {\scriptsize 4} (b);
      \draw[expensive] (r) to[bend right=10] node[midway, below, sloped] {\scriptsize 5} (c);
    \end{tikzpicture}
  \end{columns}
\end{frame}

\begin{frame}{Aqui tem um problema...}
  %\referencediagram
  \begin{columns}[c]
    \column{0.48\textwidth}

    \vspace{0.3cm}
    \textbf{Problema:}

    A escolha gulosa pode produzir um conjunto $T$ que \emph{não} é uma $r$-arborescência.

    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=1.6cm, yshift=1.5cm,
        v/.style={circle, draw, fill=blue!8, minimum size=6mm},
        cheap/.style={->, very thick, draw=blue!70},
        expensive/.style={->, draw=gray!60}]
      \node[v] (r) {\small $r$};
      \node[v] (a) [right=1.8cm of r] {\small $a$};
      \node[v] (b) [above right=1.0cm and 1.3cm of a] {\small $b$};
      \node[v] (c) [below right=1.0cm and 1.3cm of a] {\small $c$};

      \draw[cheap] (a) to[bend left=12] node[midway, above, sloped] {\scriptsize 3} (b);
      \draw[cheap] (b) to[bend left=12] node[midway, above, sloped] {\scriptsize 2} (c);
      \draw[cheap] (c) to[bend left=14] node[midway, below, sloped] {\scriptsize 3} (a);

      \draw[expensive] (r) to[bend left=8] node[midway, above, sloped] {\scriptsize 3} (a);
      \draw[expensive] (r) to[bend left=18] node[midway, above, sloped] {\scriptsize 4} (b);
      \draw[expensive] (r) to[bend right=10] node[midway, below, sloped] {\scriptsize 5} (c);
    \end{tikzpicture}
  \end{columns}
\end{frame}

\begin{frame}{Chu-Liu-Edmonds}
  \begin{block}{Algoritmo Recursivo: dado um r-digrafo ponderado $(D,w,r)$}
    chu--liu--edmonds($(D,w,r)$):
    \begin{enumerate}
      \item \textbf{Reduzir pesos}: para cada vértice $v \neq r$, subtrair o peso $\lambda(v) = \min\{w(a) : a \in \delta^-(v)\}$ do peso de cada arco que entra em $v$;

      \item \textbf{Construir $D_0$}: escolhendo um arco $a_v$ de peso reduzido zero para cada $v \neq r$;

      \item \textbf{Verificar}: se $D_0$ é uma $r$-arborescência $\Rightarrow$ \textbf{devolver} $D_0$

            Caso contrário:

      \item \textbf{Contração}: encontrar ciclo $C$ em $D_0$ e contrair;

      \item \textbf{Chamada recursiva}: Seja $D' = D/C$ e $w' = w_\lambda/C$. Calcular $T' =$ chu-liu-edmonds$(D', w', r)$;

      \item \textbf{Devolver}: expandir$(T')$.
    \end{enumerate}
  \end{block}
\end{frame}

% ...existing code...
% \begin{frame}{Exemplo: Escolha Gulosa}
%   \begin{columns}[c]
%     \column{0.48\textwidth}
%     \textbf{Definição:}

%     Para cada $v \neq r$, escolher um arco $a_v$ de peso mínimo que entra em $v$:
%     $$T := \{a_v : v \in V \setminus \{r\}\}$$

%     \vspace{0.2cm}
%     \textbf{Propriedade:}

%     Se $T$ é uma $r$-arborescência, então $T$ tem peso mínimo.

%     \column{0.52\textwidth}
%     \begin{tikzpicture}[>=Stealth, node distance=2.0cm,
%         v/.style={circle, draw, fill=blue!8, minimum size=7mm},
%         cheap/.style={->, very thick, draw=blue!70},
%         expensive/.style={->, dashed, draw=gray!60}]
%       \node[v] (r) {\small $r$};
%       \node[v] (a) [right=2.2cm of r] {\small $a$};
%       \node[v] (b) [above right=1.2cm and 1.6cm of a] {\small $b$};
%       \node[v] (c) [below right=1.2cm and 1.6cm of a] {\small $c$};

%       \draw[cheap] (a) to[bend left=12] node[midway, above, sloped] {\scriptsize 3} (b);
%       \draw[cheap] (b) to[bend left=12] node[midway, above, sloped] {\scriptsize 2} (c);
%       \draw[expensive] (c) to[bend left=14] node[midway, below, sloped] {\scriptsize 3} (a);

%       \draw[cheap] (r) to[bend left=8] node[midway, above, sloped] {\scriptsize 3} (a);
%       \draw[expensive] (r) to[bend left=18] node[midway, above, sloped] {\scriptsize 4} (b);
%       \draw[expensive] (r) to[bend right=10] node[midway, below, sloped] {\scriptsize 5} (c);
%     \end{tikzpicture}
%   \end{columns}

%   \vspace{0.2cm}
%   \begin{alertblock}{Resultado}
%     $T = \{(r,a), (a,b), (b,c)\}$ é uma $r$-arborescência geradora mínima!
%   \end{alertblock}
% \end{frame}


\begin{frame}{Passo 1: Redução de Pesos}
  \referencediagram
  \begin{columns}[c]
    \column{0.45\textwidth}
    \textbf{Definição:}

    \vspace{0.2cm}
    Para cada $v \in V \setminus \{r\}$:
    $$\lambda(v) := \min\{w(a) : a \in \delta^-(v)\}$$

    Peso $\lambda$-reduzido:
    $$w_\lambda(uv) := w(uv) - \lambda(v)$$
    \vspace{0.1cm}
    \textbf{Valores de $\lambda$:}
    \begin{itemize}
      \item $\lambda(a) = 3$, $\lambda(b) = 3$, $\lambda(c) = 2$
    \end{itemize}

    \column{0.55\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=1.0cm, yshift=-1.5cm,
        v/.style={circle, draw, fill=blue!8, minimum size=6mm},
        cycle/.style={->, very thick, draw=gray!70},
        arc/.style={->, dashed, draw=gray!60}]
      \node[v] (r) {\small $r$};
      \node[v] (a) [right=1.8cm of r] {\small $a$};
      \node[v] (b) [above right=1.0cm and 1.3cm of a] {\small $b$};
      \node[v] (c) [below right=1.0cm and 1.3cm of a] {\small $c$};

      \draw[cycle] (a) to[bend left=12] node[midway, above, sloped] {\scriptsize 0} (b);
      \draw[cycle] (b) to[bend left=12] node[midway, above, sloped] {\scriptsize 0} (c);
      \draw[cycle] (c) to[bend left=14] node[midway, below, sloped] {\scriptsize 0} (a);

      \draw[arc] (r) to[bend left=8] node[midway, above, sloped] {\scriptsize 0} (a);
      \draw[arc] (r) to[bend left=18] node[midway, above, sloped] {\scriptsize 1} (b);
      \draw[arc] (r) to[bend right=10] node[midway, below, sloped] {\scriptsize 3} (c);
    \end{tikzpicture}

    {\small Arcos do ciclo têm peso zero!}
  \end{columns}
\end{frame}

\ifshowimplementation
  \begin{frame}[fragile]{Passo 1: Implementação - Redução de Pesos}
    \textbf{Função \texttt{reduce\_weights}:}
    \begin{columns}[t]
      \column{0.5\textwidth}
      \begin{lstlisting}[basicstyle=\scriptsize\ttfamily]
def reduce_weights(D: nx.DiGraph, v: int):
    in_edges = D.in_edges(v, data=True)
    yv = min((data["w"] 
              for _, _, data in in_edges))
    for u, _, _ in in_edges:
        D[u][v]["w"] -= yv
\end{lstlisting}

      \column{0.45\textwidth}
      \textbf{Descrição:}
      \begin{itemize}
        \item Calcula $\lambda(v) = \min\{w(a) : a \in \delta^-(v)\}$
        \item Reduz o peso de cada arco que entra em $v$
        \item Complexidade: $O(k)$ $|A|$ onde $k$ é o número de arcos entrando em $v$
      \end{itemize}
    \end{columns}

    \begin{block}{Resultado}
      Após executar \texttt{reduce\_weights(D, v)} para cada $v \neq r$, todos os vértices têm ao menos um arco de entrada com peso zero.
    \end{block}
  \end{frame}
\fi

\begin{frame}{Passo 2: Construção de $D_0$}
  %\referencediagram
  \begin{columns}[c]
    \column{0.5\textwidth}
    \textbf{Formação de $D_0$:}

    \vspace{0.1cm}
    Para cada $v \neq r$, escolher um arco $a_v \in \delta^-(v)$ com $w_\lambda(a_v) = 0$ formar:

    $$D_0 := (V, \{a_v : v \in V \setminus \{r\}\})$$

    \vspace{0.1cm}
    \textbf{Arcos escolhidos:}
    \begin{itemize}
      \item $(a,b)$
      \item $(b,c)$
      \item $(c,a)$
    \end{itemize}

    \column{0.5\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=1.6cm, yshift=1.5cm,
        v/.style={circle, draw, fill=blue!8, minimum size=6mm},
        cycle/.style={->, very thick, draw=blue!70},
        arc/.style={->, dashed, draw=gray!60}]
      \node[v] (r) {\small $r$};
      \node[v] (a) [right=1.8cm of r] {\small $a$};
      \node[v] (b) [above right=1.0cm and 1.3cm of a] {\small $b$};
      \node[v] (c) [below right=1.0cm and 1.3cm of a] {\small $c$};

      \draw[cycle] (a) to[bend left=12] node[midway, above, sloped] {\scriptsize 0} (b);
      \draw[cycle] (b) to[bend left=12] node[midway, above, sloped] {\scriptsize 0} (c);
      \draw[cycle] (c) to[bend left=14] node[midway, below, sloped] {\scriptsize 0} (a);

      \draw[arc] (r) to[bend left=8] node[midway, above, sloped] {\scriptsize 0} (a);
      \draw[arc] (r) to[bend left=18] node[midway, above, sloped] {\scriptsize 1} (b);
      \draw[arc] (r) to[bend right=10] node[midway, below, sloped] {\scriptsize 3} (c);
    \end{tikzpicture}
  \end{columns}
\end{frame}

\ifshowimplementation
  \begin{frame}[fragile]{Passo 2: Implementação - Construção de $D_0$}
    \textbf{Função \texttt{get\_Dzero}:}
    \begin{columns}[t]
      \column{0.55\textwidth}
      \begin{lstlisting}[basicstyle=\tiny\ttfamily]
def get_Dzero(D: nx.DiGraph, r: int):
    D_zero = nx.DiGraph()
    for v in D.nodes():
        if v != r:
            in_edges = D.in_edges(v, 
                                  data=True)
            u = next((u for u, _, data 
                      in in_edges 
                      if data["w"] == 0))
            D_zero.add_edge(u, v)
    return D_zero
\end{lstlisting}

      \column{0.45\textwidth}
      \textbf{Descrição:}
      \begin{itemize}
        \item Para cada vértice $v \neq r$, seleciona um arco com peso zero
        \item Constrói subdigrafo gerador $D_0$
        \item Garantido existir arco de peso zero após redução
      \end{itemize}
    \end{columns}
    \begin{block}{Observação}
      Se $D_0$ for uma arborescência, então $D_0$ é necessariamente uma $r$-arborescência ótima.
    \end{block}
  \end{frame}
\fi

\begin{frame}{Passo 3: Verificação de $D_0$}
  %\referencediagram
  \begin{columns}[c]
    \column{0.45\textwidth}
    \textbf{Verificar:}

    Se $D_0$ é uma $r$-arborescência $\Rightarrow$ \textbf{devolver} $D_0$

    \vspace{0.3cm}
    \textbf{Caso contrário:}

    $D_0$ contém algum ciclo $C$.

    $\Rightarrow$ \textbf{prosseguir} para os passos 4 e 5.

    \column{0.55\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=1.6cm, yshift=1.5cm,
        v/.style={circle, draw, fill=blue!8, minimum size=6mm},
        cycle/.style={->, very thick, draw=gray!70},
        arc/.style={->, dashed, draw=gray!60}]
      \node[v] (r) {\small $r$};
      \node[v] (a) [right=1.8cm of r] {\small $a$};
      \node[v] (b) [above right=1.0cm and 1.3cm of a] {\small $b$};
      \node[v] (c) [below right=1.0cm and 1.3cm of a] {\small $c$};

      \draw[cycle] (a) to[bend left=12] node[midway, above, sloped] {\scriptsize 0} (b);
      \draw[cycle] (b) to[bend left=12] node[midway, above, sloped] {\scriptsize 0} (c);
      \draw[cycle] (c) to[bend left=14] node[midway, below, sloped] {\scriptsize 0} (a);

      \draw[arc] (r) to[bend left=8] node[midway, above, sloped] {\scriptsize 0} (a);
      \draw[arc] (r) to[bend left=18] node[midway, above, sloped] {\scriptsize 1} (b);
      \draw[arc] (r) to[bend right=10] node[midway, below, sloped] {\scriptsize 3} (c);
    \end{tikzpicture}
  \end{columns}
  \begin{alertblock}{$D_0$ não é uma $r$-arborescência!}
    Neste exemplo, $A_0 = \{(a,b), (b,c), (c,a)\}$ não forma uma $r$-arborescência pois contém o ciclo $(a, b, c, a)$.
  \end{alertblock}
\end{frame}

\ifshowimplementation
  \begin{frame}[fragile]{Passo 3: Implementação - Verificação de $D_0$}
    \textbf{Verificação se é arborescência:}
    \begin{lstlisting}[basicstyle=\small\ttfamily]
# Verificar se D_zero eh arborescencia
if nx.is_arborescence(D_zero):
    # Restaurar pesos originais
    for u, v in D_zero.edges:
        D_zero[u][v]["w"] = D[u][v]["w"]
    return D_zero
\end{lstlisting}

    \emph{Esse trecho faz parte do caso base da função recursiva principal.}
    \begin{block}{Caso Base}
      Se $D_0$ é uma arborescência, então ela é a $r$-arborescência geradora mínima. Restauramos os pesos originais e devolvemos.
    \end{block}
  \end{frame}
\fi

\begin{frame}{Passo 4: Contração de Ciclos}
  %\referencediagram
  \begin{columns}[c]
    \column{0.48\textwidth}
    \textbf{Operação:}

    Contrair ciclo $C$ em supervértice $x_C$.

    \textbf{Novo problema:}
    $(D', w', r)$ onde:
    \begin{itemize}
      \item $D' := D/C \mapsto x_C$
      \item $w' := w_\lambda/C \mapsto x_C$
    \end{itemize}

    \vspace{0.1cm}
    O arco de $D'$ que entra em $x_C$ deve corresponder ao arco de menor peso daqueles que vão de r até  $x_C$.

    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2cm,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        super/.style={circle, draw, very thick, fill=orange!10, minimum size=9mm}]
      \node[v] (r) {\small $r$};
      \node[super] (xC) [right=3.5cm of r] {\small $x_C$};

      \draw[->, very thick] (r) to[bend left=12] node[midway, above, sloped] {\scriptsize 0} (xC);
    \end{tikzpicture}

    \vspace{0.3cm}
    {\small Digrafo contraído $D'$ -}
    \emph{podem ter arcos saindo de $x_C$ em $D'$.}
  \end{columns}
  \begin{block}{Propriedade}
    Uma solução ótima em $D'$ pode ser expandida para uma solução ótima em $D$.
  \end{block}
\end{frame}

\ifshowimplementation
  \begin{frame}[fragile]{Passo 4: Implementação - Contração de Ciclos (1/3)}
    \textbf{Detecção de ciclo:}

    \vspace{0.1cm}
    \begin{lstlisting}[basicstyle=\small\ttfamily]
def find_cycle(D_zero: nx.DiGraph):
    nodes_in_cycle = set()
    for u, v, _ in nx.find_cycle(
            D_zero, orientation="original"):
        nodes_in_cycle.update([u, v])
    return D_zero.subgraph(nodes_in_cycle).to_directed()
\end{lstlisting}

    \begin{block}{Descrição}
      \begin{itemize}
        \item Usa \texttt{nx.find\_cycle} para encontrar arcos do ciclo
        \item Coleta todos os vértices envolvidos
        \item Retorna subdigrafo induzido pelos vértices do ciclo
      \end{itemize}
    \end{block}
  \end{frame}
\fi

\ifshowimplementation
  \begin{frame}[fragile]{Passo 4: Implementação - Contração de Ciclos (2/3)}
    \textbf{Arcos essenciais que entram no ciclo:}

    \begin{lstlisting}[basicstyle=\tiny\ttfamily]
def contract_cycle(D: nx.DiGraph, C: nx.DiGraph, 
                   label: int):
    cycle_nodes: set[int] = set(C.nodes())
    # Arcos essenciais entrando no ciclo
    in_to_cycle: dict[int, tuple[int, float]] = {}
    for u in D.nodes:
        if u not in cycle_nodes:
            min_weight_edge_to_cycle = min(
                ((v, data["w"])
                 for _, v, data in D.out_edges(u, data=True)
                 if v in cycle_nodes),
                key=lambda x: x[1], default=None)
            if min_weight_edge_to_cycle:
                in_to_cycle[u] = min_weight_edge_to_cycle
    for u, (v, w) in in_to_cycle.items():
        D.add_edge(u, label, w=w)
\end{lstlisting}

    \begin{block}{}
      Para cada vértice externo, encontra o arco de menor peso que entra no ciclo.
    \end{block}
  \end{frame}
\fi

\ifshowimplementation
  \begin{frame}[fragile]{Passo 4: Implementação - Contração de Ciclos (3/3)}
    \textbf{Arcos essenciais que saem do ciclo:}
    \begin{lstlisting}[basicstyle=\tiny\ttfamily]
    # Arcos essenciais saindo do ciclo
    out_from_cycle: dict[int, tuple[int, float]] = {}
    for v in D.nodes:
        if v not in cycle_nodes:
            min_weight_edge_from_cycle = min(
                ((u, data["w"])
                 for u, _, data in D.in_edges(v, data=True)
                 if u in cycle_nodes),
                key=lambda x: x[1], default=None)
            if min_weight_edge_from_cycle:
                out_from_cycle[v] = min_weight_edge_from_cycle
    for v, (u, w) in out_from_cycle.items():
        D.add_edge(label, v, w=w)
    D.remove_nodes_from(cycle_nodes)
    return in_to_cycle, out_from_cycle
\end{lstlisting}
    \begin{block}{}
      Encontra o arco de menor peso que sai do ciclo para cada vértice externo. Os dicionários retornados serão usados na expansão.
    \end{block}
  \end{frame}
\fi

\begin{frame}{Passo 5: Chamada Recursiva}
  %\referencediagram
  \begin{columns}[c]
    \column{0.48\textwidth}
    \textbf{Novo problema:}

    $(D', w', r)$

    \vspace{0.2cm}
    \textbf{Chamada recursiva:}

    $$T' := \text{chu--liu--edmonds}(D', w', r)$$

    \vspace{0.2cm}
    \textbf{Resultado:}

    $T'$ é uma $r$-arborescência geradora mínima em $(D', w')$

    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2cm,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        super/.style={circle, draw, very thick, fill=orange!10, minimum size=9mm},
        selected/.style={->, very thick, draw=green!70}]
      \node[v] (r) {\small $r$};
      \node[super] (xC) [right=3.5cm of r] {\small $x_C$};

      \draw[selected] (r) to[bend left=12] node[midway, above, sloped] {\scriptsize 0} (xC);
    \end{tikzpicture}

    \vspace{0.3cm}
    {\small $r$-arborescência ótima em $D'$}
  \end{columns}
\end{frame}

\ifshowimplementation
  \begin{frame}[fragile]{Passo 5: Implementação - Chamada Recursiva}
    \textbf{Estrutura recursiva:}

    \begin{lstlisting}[basicstyle=\tiny\ttfamily]
def chuliu_edmonds(D: nx.DiGraph, r: int, label: int):
    D_copy = cast(nx.DiGraph, D.copy())
    # Reducao de pesos
    for v in D_copy.nodes:
        if v != r:
            reduce_weights(D_copy, v)
    D_zero = get_Dzero(D_copy, r)
    if nx.is_arborescence(D_zero):
        # Restaurar pesos e devolver
        for u, v in D_zero.edges:
            D_zero[u][v]["w"] = D[u][v]["w"]
        return D_zero
    # Contrair ciclo e recursao
    C = find_cycle(D_zero)
    in_to_cycle, out_from_cycle =
        contract_cycle(D_copy, C, label)
    F_prime = chuliu_edmonds(D_copy, r, label + 1)
    # ... expansao ...
\end{lstlisting}
  \end{frame}
\fi

\begin{frame}{Passo 6: Reexpansão da Solução}
  \referencediagram
  \begin{columns}[c]
    \column{0.45\textwidth}
    \textbf{Dado:} $T'$ ótima em $(D', w')$

    \vspace{0.2cm}
    \textbf{Construir:} $T$ ótima em $(D, w)$

    \vspace{0.2cm}
    \textbf{Procedimento:}
    \begin{enumerate}
      \item Seja $uv$ o arco de $D$ correspondente ao arco $u x_C$ de $T'$
      \item Incluir $uv$ em $T$
      \item Incluir todos os arcos de $C$ exceto aquele que entra em $v$
    \end{enumerate}

    \vspace{0.2cm}
    {\small Resultado: $T$ é uma $r$-arborescência geradora mínima}

    \column{0.55\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=1.6cm, yshift=1.5cm,
        v/.style={circle, draw, fill=blue!8, minimum size=6mm},
        selected/.style={->, very thick, draw=green!70}]
      \node[v] (r) {\small $r$};
      \node[v] (a) [right=1.8cm of r] {\small $a$};
      \node[v] (b) [above right=1.0cm and 1.3cm of a] {\small $b$};
      \node[v] (c) [below right=1.0cm and 1.3cm of a] {\small $c$};

      \draw[selected] (r) to[bend left=8] node[midway, above, sloped] {\scriptsize 3} (a);
      \draw[selected] (a) to[bend left=12] node[midway, above, sloped] {\scriptsize 3} (b);
      \draw[selected] (b) to[bend left=12] node[midway, above, sloped] {\scriptsize 2} (c);
    \end{tikzpicture}

    \vspace{0.3cm}
    {\small $r$-arborescência final no digrafo original}
  \end{columns}
\end{frame}

\ifshowimplementation
  \begin{frame}[fragile]{Passo 6: Implementação - Reexpansão (1/2)}
    \textbf{Encontrar e adicionar arco correspondente:}

    \begin{lstlisting}[basicstyle=\tiny\ttfamily]
# F_prime: solucao em D' (com supervertice)
# Encontrar arco que entra em label
in_edge = next(iter(
    F_prime.in_edges(label, data=True)))
u, _, _ = cast(tuple, in_edge)

# Arco correspondente em D original
v, _ = in_to_cycle[u]
F_prime.add_edge(u, v)

# Adicionar arcos do ciclo (exceto o que entra em v)
for u_c, v_c in C.edges:
    if v != v_c:
        F_prime.add_edge(u_c, v_c)
\end{lstlisting}

    \vspace{0.05cm}
    {\small \textbf{Observação:} Identifica qual arco do ciclo não será incluído na solução final.}
  \end{frame}
\fi

\ifshowimplementation
  \begin{frame}[fragile]{Passo 6: Implementação - Reexpansão (2/2)}
    \textbf{Transferir arcos externos e restaurar pesos:}

    \begin{lstlisting}[basicstyle=\tiny\ttfamily]
# Arcos que saem do supervertice
for _, z, _ in list(
        F_prime.out_edges(label, data=True)):
    u_cycle, _ = out_from_cycle[z]
    F_prime.add_edge(u_cycle, z)

# Remover supervertice
F_prime.remove_node(label)

# Restaurar pesos originais
for u, v in F_prime.edges:
    F_prime[u][v]["w"] = D[u][v]["w"]

return F_prime
\end{lstlisting}

    \vspace{0.05cm}
    {\small \textbf{Correção:} A expansão garante que $T$ é uma $r$-arborescência ótima no digrafo original.}
  \end{frame}
\fi

\begin{frame}{Complexidade do Algoritmo}
  \textbf{Análise de Complexidade:}
  \begin{itemize}
    \item Cada chamada recursiva reduz o número de vértices em pelo menos 1
    \item No pior caso, pode haver até $O(n)$ chamadas recursivas
    \item Cada chamada envolve operações de redução de pesos, construção de $D_0$, detecção de ciclos e contração, cada uma com complexidade $O(m)$
  \end{itemize}

  \vspace{0.3cm}
  \textbf{Complexidade Total:}
  $$O(n \cdot m)$$
  onde $n$ é o número de vértices e $m$ é o número de arcos no digrafo original.
\end{frame}

\begin{frame}{Intermissão}
  \begin{center}
    \LARGE
    Algoritmo de András Frank
  \end{center}
\end{frame}

% ==================== SEÇÃO 3: ANDRÁS FRANK ====================
\section{Algoritmo de András Frank}

\begin{frame}{Algoritmo de András Frank}
  \begin{block}{Abordagem em Duas Fases}
    \textbf{Fase I (Fulkerson):} construir cobertura de $r$-conjuntos via redução de pesos

    \textbf{Fase II (Frank):} extrair $r$-arborescência geradora da cobertura
  \end{block}

  \vspace{0.3cm}

  \textbf{Objetivo da Fase I:}

  Construir uma sequência $\sigma = ((f_i, R_i, \lambda_i))_{i \in [k)}$ tal que:
  \begin{itemize}
    \item $F := \{f_i : i \in [k)\}$ é uma \textbf{cobertura de $r$-conjuntos}
    \item A sequência $(R_i, \lambda_i)_{i \in [k)}$ é \textbf{$w$-disjunta}
  \end{itemize}

  \vspace{0.2cm}
  \textbf{Objetivo da Fase II:}

  Extrair $r$-arborescência geradora mínima usando $F$.
\end{frame}

\begin{frame}{Fase I: Conceitos Fundamentais}
  \textbf{Coleção Laminar:}

  Uma coleção $\mathcal{L}$ de conjuntos é \textbf{laminar} se, para quaisquer $X, Y \in \mathcal{L}$:
  $$X \subseteq Y \quad\text{ou}\quad Y \subseteq X \quad\text{ou}\quad X \cap Y = \emptyset$$

  \begin{center}
    \begin{tikzpicture}[scale=0.8, every node/.style={scale=0.8}]
      % Definição dos conjuntos
      \draw[thick, fill=blue!20] (0,0) ellipse (3 and 2); % Conjunto maior (A)
      \draw[thick, fill=green!20] (1,0) ellipse (1.5 and 1); % Subconjunto de A (B)
      \draw[thick, fill=red!20] (-1.5,0) ellipse (0.8 and 0.7); % Subconjunto de A (C)
      \draw[thick, fill=red!20] (-1,1.2) ellipse (0.4 and 0.4); % Subconjunto de A (F)
      \draw[thick, fill=yellow!20] (0.5,0) ellipse (0.3 and 0.5); % Subconjunto de B (D)
      \draw[thick, fill=yellow!20] (1.5,0) ellipse (0.3 and 0.5); % Subconjunto de B (E)

      % Números dentro dos conjuntos
      \node at (-2, 1) {1}; % Elemento em A
      \node at (-0.5, -1.2) {2}; % Elemento em A
      \node at (-1.5, 0.3) {3}; % Elemento em B
      \node at (1.0, -0.5) {4}; % Elemento em B
      \node at (-1.5, -0.3) {5}; % Elemento em C
      \node at (-1, 1.2) {6}; % Elemento em F
      \node at (0.5, 0) {7}; % Elemento em D
      \node at (1.5, 0) {8}; % Elemento em E

      % Rótulos dos conjuntos
      \node at (-2.5, 1.5) {\( A \)}; % Rótulo para o conjunto A
      \node at (1.5, 1.3) {\( B \)}; % Rótulo para o conjunto B
      \node at (-2.5, -0.5) {\( C \)}; % Rótulo para o conjunto C
      \node at (2, 0.5) {\( D \)}; % Rótulo para o conjunto D
      \node at (1, 0.5) {\( E \)}; % Rótulo para o conjunto E
      \node at (-0.2, 1.3) {\( F \)}; % Rótulo para o conjunto F
    \end{tikzpicture}
  \end{center}
  \begin{center}
    {\small Exemplo de coleção laminar: $\mathcal{L} = \{A, B, C, D, E, F\}$}
  \end{center}
\end{frame}

\begin{frame}{Fase I: Conceitos Fundamentais}
  \vspace{0.3cm}
  \textbf{Sequência $w$-disjunta:}
  Uma sequência $((R_i, \lambda_i))_{i \in [k)}$ é \textbf{$w$-disjunta} se:
  $$\sum_{i \in [k)} \lambda_i \,[a \in \delta^-(R_i)] \;\le\; w(a) \quad \forall a \in A(D)$$

  {\small O peso $w(a)$ limita a soma das multiplicidades $\lambda_i$ sobre os conjuntos que $a$ entra.}
  \vspace{0.3cm}
  \begin{center}
    \begin{tikzpicture}[scale=0.6,
        >=Stealth,
        vertex/.style={circle,draw,inner sep=1pt,font=\small},
        arc/.style={->,thick},
        rset/.style={draw=blue!60,thick},
        label/.style={font=\small},
        weight/.style={font=\small}
      ]

      %-------------------------------
      % Vértices e arco a
      %-------------------------------
      \node[vertex] (u) at (-2,0) {$u$};
      \node[vertex] (v) at ( 2.5,0) {$v$};

      \draw[arc] (u) -- node[weight,above,yshift=-1pt,xshift=-20pt]
      {$a, 5$} (v);

      %-------------------------------
      % r-conjuntos laminares com v dentro
      % R1 ⊂ R2 ⊂ R3
      %-------------------------------
      % menor
      \draw[rset] (v) ellipse (0.8cm and 0.7cm);
      \node[label,blue!70,anchor=west]
      at ($(v)+(0.5,0.6)$) {$R_1, 2$};

      % intermediário
      \draw[rset] (v) ellipse (1.8cm and 1.2cm);
      \node[label,blue!70,anchor=west]
      at ($(v)+(1.7,0.0)$) {$R_2, 1$};

      % maior
      \draw[rset] (v) ellipse (2.8cm and 1.7cm);
      \node[label,blue!70,anchor=west]
      at ($(v)+(2.6,-0.6)$) {$R_3, 1$};

      %-------------------------------
      % Texto da desigualdade
      %-------------------------------

    \end{tikzpicture}
  \end{center}
  \begin{center}
    \small{Um arco $a$ de peso $5$ que entra nos $r$-conjuntos
      $R_1$, $R_2$ e $R_3$ com multiplidades $2$, $1$, e $1$, respectivamente.
    }
  \end{center}
\end{frame}

\begin{frame}{Fase I: $r$-conjunto minimal}
  \begin{block}{$r$-conjunto minimal não coberto por $F$}
    Um $r$-conjunto $R$ é \textbf{minimal não coberto por $F$} se:
    \begin{itemize}
      \item $F$ não entra em $R$ (i.e., $F \cap \delta^-(R) = \emptyset$)
      \item Para todo $\emptyset \subset R' \subset R$, existe arco de $F$ que entra em $R'$
    \end{itemize}
  \end{block}

  \vspace{0.3cm}
  \textbf{Propriedade importante:}

  Se $S$ é uma fonte de $\mathcal{C}(D_0)$ com $r \notin S$, então $S$ é um $r$-conjunto minimal não coberto por $A(D_0)$.
\end{frame}

\begin{frame}{Fase I: Condições de Otimalidade}
  Seja $F$ uma cobertura de $r$-conjuntos e $((R_i, \lambda_i))_{i \in [k)}$ uma sequência $w$-disjunta.

  \vspace{0.2cm}
  Se $w(F) = \sum_{i \in [k)} \lambda_i$, então valem as \textbf{condições de otimalidade}:

  \begin{subequations}
    \begin{align}
      \forall a \in F:\quad   & w(a) = \sum_{i \in [k)} \lambda_i\,[a \in \delta^-(R_i)] \tag{CO1} \\
      \forall i \in [k):\quad & \varrho_F(R_i) = 1 \tag{CO2}
    \end{align}
  \end{subequations}

  \vspace{0.2cm}
  \begin{alertblock}{Consequência}
    Se $F$ é uma $r$-arborescência geradora e as condições valem, então $F$ tem peso mínimo e a sequência tem valor máximo.
  \end{alertblock}
\end{frame}

% \begin{frame}{Fase I: Objetivo}
%   \textbf{Construir uma sequência} $((f_i, R_i, \lambda_i))_{i \in [k)}$ que satisfaz:

%   \vspace{0.2cm}
%   \begin{enumerate}
%     \item $\{f_i : i \in [k)\}$ é uma \textbf{cobertura de $r$-conjuntos} de $D$

%     \item $((R_i, \lambda_i))_{i \in [k)}$ é uma \textbf{sequência $w$-disjunta}

%     \item $\forall j \in [k): \sum_{i \in [k)} \lambda_i\,[f_j \in \delta^-(R_i)] = w(f_j)$ \hfill {\small (CO1)}
%   \end{enumerate}

%   \vspace{0.3cm}
%   \textbf{Interpretação:}
%   \begin{itemize}
%     \item A Fase I constrói uma cobertura $F$ que satisfaz a condição de otimalidade (CO1)
%     \item Cada arco $f_j \in F$ tem peso "totalmente explicado" pelos $\lambda_i$
%     \item A coleção $\{R_i\}$ é laminar e os $\lambda_i$ respeitam os pesos dos arcos
%   \end{itemize}
% \end{frame}

\begin{frame}{Fase I: Algoritmo de Fulkerson}
  \begin{columns}[c]
    \column{0.52\textwidth}
    \textbf{Dado:} $(D,w,r)$
    \vspace{0.1cm}
    \begin{enumerate}
      \item \textbf{Inicializar}:
            \begin{itemize}
              \item $c := w$
              \item $\sigma := \epsilon$
              \item $F := \emptyset$
              \item $D_0 := (V, \varnothing)$
            \end{itemize}
      \item \textbf{Enquanto} $\exists$ fonte $R$ em $\mathcal{C}(D_0)$, $r \notin R$:
            \begin{itemize}
              \item $\lambda := \min\{c(a) : a \in \delta^-(R)\}$
              \item $f \in \delta^-(R)$ com $c(f) = \lambda$
              \item $\sigma := \sigma \cdot (f, R, \lambda)$
              \item $F := F \cup \{f\}$
              \item $c := c - \lambda \mathbf{1}_{\delta^-(R)}$
              \item $D_0 := (V, \varnothing)$
            \end{itemize}
      \item \textbf{Devolver}: $\sigma$
    \end{enumerate}

    \column{0.48\textwidth}
    \begin{center}
      \begin{block}{Condensação}
        {$\mathcal{C}(D_0)$ com $r$ isolado e duas fontes $S_1, S_2$, ressaltando que $S_1, S_2$ são componentes fortemente conexas. - não vértices individuais.}
      \end{block}
    \end{center}
  \end{columns}
\end{frame}


\begin{frame}{Fase I: Encontrando $r$-conjuntos minimais}
  \begin{columns}[c]
    \column{0.52\textwidth}
    \textbf{Como encontrar um $r$-conjunto minimal não coberto?}

    \vspace{0.2cm}
    \begin{enumerate}
      \item Calcular a condensação $\mathcal{C}(D_0)$
      \item Identificar componentes fortemente conexas (CFCs)
      \item Encontrar uma fonte $S$ em $\mathcal{C}(D_0)$ tal que $r \notin S$
    \end{enumerate}

    \begin{block}{Proposição}
      Toda fonte $S$ de $\mathcal{C}(D_0)$ com $r \notin S$ é um $r$-conjunto minimal não coberto por $F$.
    \end{block}

    \vspace{0.2cm}
    {\small \textbf{Complexidade:} identificação de CFCs em $O(|V|)$ usando Kosaraju.}

    \column{0.48\textwidth}
    \begin{center}
      \begin{tikzpicture}[>=Stealth, scale=0.65, transform shape,
          component/.style={circle, draw, thick, minimum size=1.2cm, fill=blue!10},
          root/.style={circle, draw, thick, minimum size=1.2cm, fill=red!20},
          source/.style={circle, draw, thick, minimum size=1.2cm, fill=green!20},
          arc/.style={->, thick, draw=gray!70}]

        % Componente r (isolada)
        \node[root] (r) at (0, 3) {$r$};

        % Componentes fortes - duas fontes
        \node[source] (S1) at (-2, 1) {$S_1$};
        \node[source] (S2) at (2, 1) {$S_2$};

        % Outras componentes (não-fontes)
        \node[component] (C1) at (-1, -0.5) {$C_1$};
        \node[component] (C2) at (1.5, -0.5) {$C_2$};

        % Arcos entre componentes
        \draw[arc] (S1) to[bend right=15] (C1);
        \draw[arc] (S2) to[bend left=15] (C2);
        \draw[arc] (S1) to[bend left=10] (C2);
        \draw[arc] (C1) to[bend right=10] (C2);

        % Legenda
        \node[anchor=west, font=\large] at (-3.2, -1.8) {\textcolor{red!70}{$\bullet$ raiz $r$}};
        \node[anchor=west, font=\large] at (-3.2, -2.2) {\textcolor{green!70}{$\bullet$ fontes}};
        \node[anchor=west, font=\large] at (-3.2, -2.6) {\textcolor{blue!70}{$\bullet$ não-fontes}};
      \end{tikzpicture}

      {\small Exemplo de condensação $\mathcal{C}(D_0)$ com raiz $r$ isolada e duas fontes $S_1, S_2$.}
    \end{center}
  \end{columns}
\end{frame}

\ifshowimplementation
  \begin{frame}[fragile]{Fase I: Implementação - Encontrar $r$-conjunto minimal (1/3)}
    \textbf{Função \texttt{phase1}:}

    \begin{lstlisting}[basicstyle=\tiny\ttfamily]
def phase1(D: nx.DiGraph, r: int):
    D_copy = D.copy()
    sigma = []
    D_zero = nx.DiGraph()
    D_zero.add_nodes_from(D_copy.nodes())
    
    while True:
        C = nx.condensation(D_zero)
        sources = [x for x in C.nodes() 
                   if C.in_degree(x) == 0]
        if len(sources) == 1: 
            break
        
        for s in sources:
            X = C.nodes[s]["members"]
            if r in X:
                continue
            # ... (continua no proximo slide)
\end{lstlisting}

    \vspace{0.05cm}
    {\small \textbf{Observação:} Loop principal até todos $r$-conjuntos estarem cobertos}
  \end{frame}
\fi

\ifshowimplementation
  \begin{frame}[fragile]{Fase I: Implementação - Seleção de Arcos (2/3)}
    \textbf{Continuação da função \texttt{phase1}:}

    \begin{lstlisting}[basicstyle=\tiny\ttfamily]
            # ... (continuacao do loop)
            arcs = [(u, v, data) 
                    for u, v, data in D_copy.edges(data=True) 
                    if u not in X and v in X]
            
            min_weight = min(data["w"] for _, _, data in arcs)
            a = update_weights(D_copy, arcs, min_weight)
            
            D_zero.add_edge(a[0], a[1])
            sigma.append((a, X, min_weight))
    
    return sigma
\end{lstlisting}

    \vspace{0.05cm}
    {\small \textbf{Complexidade:} $O(|V||A|)$ - limitado por $2|V|-1$ iterações}
  \end{frame}
\fi

\ifshowimplementation
  \begin{frame}[fragile]{Fase I: Implementação - Atualização de Pesos (3/3)}
    \textbf{Função \texttt{update\_weights}:}

    \begin{lstlisting}[basicstyle=\scriptsize\ttfamily]
def update_weights(D: nx.DiGraph, 
                   arcs: list[tuple[int, int, dict]],
                   min_weight: float):
    for u, v, _ in arcs:
        D[u][v]["w"] -= min_weight
        if D[u][v]["w"] == 0:
            a = (u, v)
    return a
\end{lstlisting}

    \vspace{0.2cm}
    \begin{block}{Descrição}
      \begin{itemize}
        \item Reduz peso de todos arcos que entram no $r$-conjunto
        \item Devolve arco com peso zero (peso reduzido mínimo)
        \item Atualiza o digrafo in-place
      \end{itemize}
    \end{block}
  \end{frame}
\fi

\begin{frame}{Exemplo: Digrafo Inicial}
  \begin{columns}[c]
    \column{0.30\textwidth}
    \textbf{Digrafo ponderado $(D,w,r)$:}

    % \vspace{0.02cm}
    % \begin{itemize}
    %   \item Vértices: $\{r, a, b, c, d, e, f, g\}$
    %   \item Raiz: $r$
    % \end{itemize}

    % \vspace{0.02cm}
    % \textbf{Pesos dos arcos:}
    % \begin{itemize}
    %   \item $(r,a): 5$, $(r,b): 6$, $(r,c): 5$
    %   \item $(a,b): 8$, $(b,c): 2$, $(b,d): 5$
    %   \item $(c,g): 8$, $(c,f): 3$, $(d,g): 4$
    %   \item $(d,e): 4$, $(e,d): 4$, $(e,a): 3$
    %   \item $(e,f): 2$, $(f,d): 1$
    % \end{itemize}
    \column{0.70\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        arc/.style={->, thick, draw=gray!70}]
      \node[v,fill=red!20] (r) {\small $r$};
      \node[v] (b) [right=1.8cm of r] {\small $b$};
      \node[v] (a) [above=1.2cm of b] {\small $a$};
      \node[v] (c) [below=1.2cm of b] {\small $c$};

      \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};

      \node[v] (d) [right=1.2cm of b] {\small $d$};

      \node[v] (f) [right=1.2cm of d] {\small $f$};

      \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};

      \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize 5} (a);
      \draw[arc] (r) to node[midway, above, sloped] {\scriptsize 6} (b);
      \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize 5} (c);


      \draw[arc] (a) to node[midway, above, sloped] {\scriptsize 8} (b);


      \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 2} (c);
      \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 5} (d);

      \draw[arc] (c) to node[midway, above, sloped] {\scriptsize 8} (g);
      \draw[arc] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize 3} (f);

      \draw[arc] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize 4} (e);
      \draw[arc] (d) to node[midway, below, sloped] {\scriptsize 4} (g);

      \draw[arc] (e) to node[midway, above, sloped] {\scriptsize 3} (a);
      \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize 6} (f);
      \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize 4} (d);

      \draw[arc] (f) to node[midway, below, sloped] {\scriptsize 1} (d);

      \draw[arc] (g) to node[midway, above, sloped] {\scriptsize 5} (b);


    \end{tikzpicture}
  \end{columns}
  \begin{alertblock}{Problema}
    Aplicar o algoritmo de András Frank para encontrar a $r$-arborescência geradora de peso mínimo.
  \end{alertblock}
\end{frame}

\begin{frame}{Fase I: Iteração 1 - Encontrar $r$-conjunto minimal}
  \begin{columns}[c]
    \column{0.48\textwidth}
    \textbf{Estado inicial:}
    \begin{itemize}
      \item $F = \emptyset$ (nenhum arco selecionado)
      \item $D_0 = (V, \emptyset)$
      \item $\mathcal{C}(D_0)$ tem 8 fontes
    \end{itemize}

    \vspace{0.05cm}
    \textbf{7 Fontes são $r$-conjuntos:}
    \begin{itemize}
      \item $\{a\}$, $\{b\}$, $\{c\}$, $\{d\}$, $\{e\}$, $\{f\}$, $\{g\}$
    \end{itemize}

    \vspace{0.05cm}
    \textbf{Escolha:}

    $R_0 = \{b\}$ (minimal)

    \vspace{0.05cm}
    Arcos que entram em $\{b\}$:
    \begin{itemize}
      \item $(r,b): 6$
      \item $(g,b): 5$ ← \textbf{mínimo}
      \item $(a,b): 8$
    \end{itemize}

    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        rset/.style={draw=orange!70, very thick, dashed, rounded corners},
        arc/.style={->, thick, draw=gray!70},
        selected/.style={->, very thick, draw=blue!70}]
      \node[v,fill=red!20] (r) {\small $r$};
      \node[v] (b) [right=1.8cm of r] {\small $b$};
      \node[v] (a) [above=1.2cm of b] {\small $a$};
      \node[v] (c) [below=1.2cm of b] {\small $c$};
      \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};
      \node[v] (d) [right=1.2cm of b] {\small $d$};
      \node[v] (f) [right=1.2cm of d] {\small $f$};
      \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};
      \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize 5} (a);
      \draw[arc] (r) to node[midway, above, sloped] {\scriptsize 6} (b);
      \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize 5} (c);
      \draw[arc] (a) to node[midway, above, sloped] {\scriptsize 8} (b);
      \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 2} (c);
      \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 5} (d);
      \draw[arc] (c) to node[midway, above, sloped] {\scriptsize 8} (g);
      \draw[arc] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize 3} (f);
      \draw[arc] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize 4} (e);
      \draw[arc] (d) to node[midway, below, sloped] {\scriptsize 4} (g);
      \draw[arc] (e) to node[midway, above, sloped] {\scriptsize 3} (a);
      \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize 6} (f);
      \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize 4} (d);
      \draw[selected] (g) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{5}} (b);
      \draw[arc] (f) to node[midway, below, sloped] {\scriptsize 1} (d);
      \node[rset, fit=(b)] {};
      \node[orange!70, above=0.2cm of b] {\small $R_0$};
    \end{tikzpicture}
    \begin{center}
      {\small $\lambda_0 = 5$, $f_0 = (g,b)$}
    \end{center}
  \end{columns}

\end{frame}

\begin{frame}{Fase I: Iteração 2 - Redução de Pesos}
  \begin{columns}[c]
    \column{0.48\textwidth}
    \textbf{Atualização:}
    \begin{itemize}
      \item $\sigma = [(f_0, R_0, \lambda_0)]$
      \item $F = \{(g,b)\}$
      \item $D_0 = (V, \{(g,b)\})$
    \end{itemize}

    \textbf{Redução de pesos:}
    \begin{itemize}
      \item $c(r,b) = 6 - 5 = 1$ \checkmark
      \item $c(g,b) = 5 - 5 = 0$ \checkmark
      \item $c(a,b) = 8 - 5 = 3$ \checkmark
    \end{itemize}
    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        rset/.style={draw=orange!70, very thick, dashed, rounded corners},
        vselected/.style={circle, draw, fill=orange!10, minimum size=7mm},
        arc/.style={->, thick, draw=gray!70},
        selected/.style={->, very thick, draw=green!70},
        zero/.style={->, very thick, draw=red!70}]
      \node[v,fill=red!20] (r) {\small $r$};
      \node[v] (b) [right=1.8cm of r] {\small $b$};
      \node[v] (a) [above=1.2cm of b] {\small $a$};
      \node[v] (c) [below=1.2cm of b] {\small $c$};
      \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};
      \node[v] (d) [right=1.2cm of b] {\small $d$};
      \node[v] (f) [right=1.2cm of d] {\small $f$};
      \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};
      \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize 5} (a);
      \draw[arc] (r) to node[midway, above, sloped] {\scriptsize \textcolor{red} 1} (b);
      \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize 5} (c);
      \draw[arc] (a) to node[midway, above, sloped] {\scriptsize \textcolor{red} 3} (b);
      \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 2} (c);
      \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 5} (d);
      \draw[arc] (c) to node[midway, above, sloped] {\scriptsize 8} (g);
      \draw[arc] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize 3} (f);
      \draw[arc] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize 4} (e);
      \draw[arc] (d) to node[midway, below, sloped] {\scriptsize 4} (g);
      \draw[arc] (e) to node[midway, above, sloped] {\scriptsize 3} (a);
      \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize 6} (f);
      \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize 4} (d);
      \draw[zero] (g) to node[midway, above, sloped] {\scriptsize \textcolor{red}{$f_0$}} (b);
      \draw[arc] (f) to node[midway, below, sloped] {\scriptsize 1} (d);
    \end{tikzpicture}
    \begin{center}
      {\small $\lambda_0 = 5$, $f_0 = (g,b)$}
    \end{center}
  \end{columns}

  \begin{block}{}
    Pesos são reduzidos para garantir que $\sigma$ seja $w$-disjunta.
  \end{block}
\end{frame}

\begin{frame}{Fase I: Iteração 3 - Redução de Pesos}
  \begin{columns}[c]
    \column{0.48\textwidth}
    \textbf{Estado:}
    \begin{itemize}
      \item $F = \{(g,b)\}$
      \item $D_0 = (V, F)$
    \end{itemize}

    \vspace{0.2cm}
    \textbf{Escolha:} $R_1 = \{c\}$

    \vspace{0.2cm}
    \textbf{Seleção:}

    \begin{itemize}
      \item $\lambda_1 = 2$
      \item $f_1 = (b,c)$
    \end{itemize}
    % \begin{itemize}
    %   \item $(r,c): 5$, $(b,c): 2$ ← \textbf{mínimo: 2}
    %   \item $c(r,c) = 5 - 2 = 3$, $c(b,c) = 2 - 2 = 0$
    % \end{itemize}

    % \vspace{0.2cm}
    % $\mathcal{C}(D_0)$ com $F = \{(g,b), (b,c)\}$.

    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        vselected/.style={circle, draw, fill=orange!10, minimum size=7mm},
        rset/.style={draw=orange!70, very thick, dashed, rounded corners},
        arc/.style={->, thick, draw=gray!70},
        selected/.style={->, very thick, draw=red!70},
        zero/.style={->, very thick, draw=blue!70}]
      \node[v,fill=red!20] (r) {\small $r$};
      \node[v] (b) [right=1.8cm of r] {\small $b$};
      \node[v] (a) [above=1.2cm of b] {\small $a$};
      \node[v] (c) [below=1.2cm of b] {\small $c$};
      \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};
      \node[v] (d) [right=1.2cm of b] {\small $d$};
      \node[v] (f) [right=1.2cm of d] {\small $f$};
      \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};
      \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize 5} (a);
      \draw[arc] (r) to node[midway, above, sloped] {\scriptsize 1} (b);
      \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize \textcolor{red} 3} (c);
      \draw[arc] (a) to node[midway, above, sloped] {\scriptsize 3} (b);
      \draw[selected] (b) to node[midway, above, sloped] {\scriptsize \textcolor{red}{$f_1$}} (c);
      \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 5} (d);
      \draw[arc] (c) to node[midway, above, sloped] {\scriptsize 8} (g);
      \draw[arc] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize 3} (f);
      \draw[arc] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize 4} (e);
      \draw[arc] (d) to node[midway, below, sloped] {\scriptsize 4} (g);
      \draw[arc] (e) to node[midway, above, sloped] {\scriptsize 3} (a);
      \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize 6} (f);
      \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize 4} (d);
      \draw[zero] (g) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_0$}} (b);
      \draw[arc] (f) to node[midway, below, sloped] {\scriptsize 1} (d);
      \node[rset, fit=(c)] {};
      \node[orange!70, below=0.2cm of c] {\small $R_1$};
    \end{tikzpicture}
  \end{columns}
\end{frame}

\begin{frame}{Fase I: Iteração 4 - Redução de Pesos}
  \begin{columns}[c]
    \column{0.48\textwidth}
    \textbf{Estado:}

    $F = \{(g,b), (b,c)\}$

    \vspace{0.2cm}

    \textbf{Escolha:} $R_2 = \{a\}$

    \vspace{0.2cm}
    Arcos que entram em $\{a\}$:
    \begin{itemize}
      \item $(r,a): 5$
      \item $(e,a): 3$ ← \textbf{mínimo}
    \end{itemize}

    \vspace{0.2cm}
    \textbf{Seleção:}
    \begin{itemize}
      \item $\lambda_2 = 3$
      \item $f_2 = (e,a)$
    \end{itemize}

    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        rset/.style={draw=orange!70, very thick, dashed, rounded corners},
        arc/.style={->, thick, draw=gray!70},
        selected/.style={->, very thick, draw=red!70},
        zero/.style={->, very thick, draw=blue!70}]
      \node[v,fill=red!20] (r) {\small $r$};
      \node[v] (b) [right=1.8cm of r] {\small $b$};
      \node[v] (a) [above=1.2cm of b] {\small $a$};
      \node[v] (c) [below=1.2cm of b] {\small $c$};
      \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};
      \node[v] (d) [right=1.2cm of b] {\small $d$};
      \node[v] (f) [right=1.2cm of d] {\small $f$};
      \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};
      \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize \textcolor{red} 2} (a);
      \draw[arc] (r) to node[midway, above, sloped] {\scriptsize 1} (b);
      \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize 3} (c);
      \draw[arc] (a) to node[midway, above, sloped] {\scriptsize 3} (b);
      \draw[zero] (b) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_1$}} (c);
      \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 5} (d);
      \draw[arc] (c) to node[midway, above, sloped] {\scriptsize 8} (g);
      \draw[arc] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize 3} (f);
      \draw[arc] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize 4} (e);
      \draw[arc] (d) to node[midway, below, sloped] {\scriptsize 4} (g);
      \draw[selected] (e) to node[midway, above, sloped] {\scriptsize \textcolor{red}{$f_2$}} (a);
      \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize 6} (f);
      \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize 4} (d);
      \draw[zero] (g) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_0$}} (b);
      \draw[arc] (f) to node[midway, below, sloped] {\scriptsize 1} (d);
      \node[rset, fit=(a)] {};
      \node[orange!70, above=0.2cm of a] {\small $R_2$};
    \end{tikzpicture}
  \end{columns}
\end{frame}

\begin{frame}{Fase I: Iteração 5 - Redução de Pesos}
  \begin{columns}[c]
    \column{0.48\textwidth}
    \textbf{Estado:} $F = \{(g,b), (b,c), (e,a)\}$

    \vspace{0.2cm}

    \textbf{Escolha:} $R_3 = \{g\}$

    \vspace{0.2cm}
    Arcos que entram em $\{g\}$:
    \begin{itemize}
      \item $(c,g): 8$
      \item $(d,g): 4$ ← \textbf{mínimo}
    \end{itemize}

    \vspace{0.2cm}
    \textbf{Seleção:}
    \begin{itemize}
      \item $\lambda_3 = 4$
      \item $f_3 = (d,g)$
    \end{itemize}

    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        rset/.style={draw=orange!70, very thick, dashed, rounded corners},
        arc/.style={->, thick, draw=gray!70},
        selected/.style={->, very thick, draw=red!70},
        zero/.style={->, very thick, draw=blue!70}]
      \node[v,fill=red!20] (r) {\small $r$};
      \node[v] (b) [right=1.8cm of r] {\small $b$};
      \node[v] (a) [above=1.2cm of b] {\small $a$};
      \node[v] (c) [below=1.2cm of b] {\small $c$};
      \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};
      \node[v] (d) [right=1.2cm of b] {\small $d$};
      \node[v] (f) [right=1.2cm of d] {\small $f$};
      \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};
      \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize 2} (a);
      \draw[arc] (r) to node[midway, above, sloped] {\scriptsize 1} (b);
      \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize 3} (c);
      \draw[arc] (a) to node[midway, above, sloped] {\scriptsize 3} (b);
      \draw[zero] (b) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_1$}} (c);
      \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 5} (d);
      \draw[arc] (c) to node[midway, above, sloped] {\scriptsize \textcolor{red} 4} (g);
      \draw[arc] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize 3} (f);
      \draw[arc] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize 4} (e);
      \draw[selected] (d) to node[midway, below, sloped] {\scriptsize \textcolor{red}{$f_3$}} (g);
      \draw[zero] (e) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_2$}} (a);
      \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize 6} (f);
      \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize 4} (d);
      \draw[zero] (g) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_0$}} (b);
      \draw[arc] (f) to node[midway, below, sloped] {\scriptsize 1} (d);
      \node[rset, fit=(g)] {};
      \node[orange!70, below=0.2cm of g] {\small $R_3$};
    \end{tikzpicture}
  \end{columns}
\end{frame}

\begin{frame}{Fase I: Iteração 6 - Redução de Pesos}
  \begin{columns}[c]
    \column{0.48\textwidth}
    \textbf{Estado:} $F = \{(g,b), (b,c), (e,a), (d,g)\}$

    \vspace{0.2cm}

    \textbf{Escolha:} $R_4 = \{d\}$

    \vspace{0.2cm}
    Arcos que entram em $\{d\}$:
    \begin{itemize}
      \item $(b,d): 5$
      \item $(e,d): 4$
      \item $(f,d): 1$ ← \textbf{mínimo}
    \end{itemize}

    \vspace{0.2cm}
    \textbf{Seleção:}
    \begin{itemize}
      \item $\lambda_4 = 1$
      \item $f_4 = (f,d)$
    \end{itemize}

    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        rset/.style={draw=orange!70, very thick, dashed, rounded corners},
        arc/.style={->, thick, draw=gray!70},
        selected/.style={->, very thick, draw=red!70},
        zero/.style={->, very thick, draw=blue!70}]
      \node[v,fill=red!20] (r) {\small $r$};
      \node[v] (b) [right=1.8cm of r] {\small $b$};
      \node[v] (a) [above=1.2cm of b] {\small $a$};
      \node[v] (c) [below=1.2cm of b] {\small $c$};
      \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};
      \node[v] (d) [right=1.2cm of b] {\small $d$};
      \node[v] (f) [right=1.2cm of d] {\small $f$};
      \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};
      \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize 2} (a);
      \draw[arc] (r) to node[midway, above, sloped] {\scriptsize 1} (b);
      \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize 3} (c);
      \draw[arc] (a) to node[midway, above, sloped] {\scriptsize 3} (b);
      \draw[zero] (b) to node[midway, above, sloped] {\scriptsize \textcolor{blue} {$f_1$}} (c);
      \draw[arc] (b) to node[midway, above, sloped] {\scriptsize \textcolor{red} 4} (d);
      \draw[arc] (c) to node[midway, above, sloped] {\scriptsize 4} (g);
      \draw[arc] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize 3} (f);
      \draw[arc] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize 4} (e);
      \draw[zero] (d) to node[midway, below, sloped] {\scriptsize \textcolor{blue} {$f_3$}} (g);
      \draw[zero] (e) to node[midway, above, sloped] {\scriptsize \textcolor{blue} {$f_2$}} (a);
      \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize 6} (f);
      \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize \textcolor{red} 3} (d);
      \draw[zero] (g) to node[midway, above, sloped] {\scriptsize \textcolor{blue} {$f_0$}} (b);
      \draw[selected] (f) to node[midway, below, sloped] {\scriptsize \textcolor{red} {$f_4$}} (d);
      \node[rset, fit=(d)] {};
      \node[orange!70, above=0.2cm of d] {\small $R_4$};
    \end{tikzpicture}
  \end{columns}
\end{frame}

\begin{frame}{Fase I: Iteração 7 - Redução de Pesos}
  \begin{columns}[c]
    \column{0.48\textwidth}
    \textbf{Estado:} $F = \{(g,b), (b,c), (e,a), (d,g), (f, d)\}$

    \vspace{0.2cm}

    \textbf{Escolha:} $R_5 = \{f\}$

    \vspace{0.2cm}
    Arcos que entram em $\{f\}$:
    \begin{itemize}
      \item $(c,f): 3$ ← \textbf{mínimo}
      \item $(e,f): 6$
    \end{itemize}

    \vspace{0.2cm}
    \textbf{Seleção:}
    \begin{itemize}
      \item $\lambda_5 = 3$
      \item $f_5 = (c,f)$
    \end{itemize}

    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        rset/.style={draw=orange!70, very thick, dashed, rounded corners},
        arc/.style={->, thick, draw=gray!70},
        selected/.style={->, very thick, draw=red!70},
        zero/.style={->, very thick, draw=blue!70}]
      \node[v,fill=red!20] (r) {\small $r$};
      \node[v] (b) [right=1.8cm of r] {\small $b$};
      \node[v] (a) [above=1.2cm of b] {\small $a$};
      \node[v] (c) [below=1.2cm of b] {\small $c$};
      \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};
      \node[v] (d) [right=1.2cm of b] {\small $d$};
      \node[v] (f) [right=1.2cm of d] {\small $f$};
      \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};
      \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize 2} (a);
      \draw[arc] (r) to node[midway, above, sloped] {\scriptsize 1} (b);
      \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize 3} (c);
      \draw[arc] (a) to node[midway, above, sloped] {\scriptsize 3} (b);
      \draw[zero] (b) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_1$}} (c);
      \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 4} (d);
      \draw[arc] (c) to node[midway, above, sloped] {\scriptsize 4} (g);
      \draw[selected] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize \textcolor{red}{$f_5$}} (f);
      \draw[arc] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize 4} (e);
      \draw[zero] (d) to node[midway, below, sloped] {\scriptsize \textcolor{blue}{$f_3$}} (g);
      \draw[zero] (e) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_2$}} (a);
      \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize \textcolor{red} 3} (f);
      \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize 3} (d);
      \draw[zero] (g) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_0$}} (b);
      \draw[zero] (f) to node[midway, below, sloped] {\scriptsize \textcolor{blue}{$f_4$}} (d);
      \node[rset, fit=(f)] {};
      \node[orange!70, right=0.2cm of f] {\small $R_5$};
    \end{tikzpicture}
  \end{columns}
\end{frame}

\begin{frame}{Fase I: Iteração 8 - Redução de Pesos}
  \begin{columns}[c]
    \column{0.48\textwidth}
    \textbf{Estado:} $F = \{(g,b), (b,c), (e,a), (d,g), (f,d), (c,f)\}$

    \vspace{0.2cm}

    \textbf{Escolha:} $R_6 = \{e\}$

    \vspace{0.2cm}
    Arcos que entram em $\{e\}$:
    \begin{itemize}
      \item $(d,e): 4$ ← \textbf{mínimo}
    \end{itemize}

    \vspace{0.2cm}
    \textbf{Seleção:}
    \begin{itemize}
      \item $\lambda_6 = 4$
      \item $f_6 = (d,e)$
    \end{itemize}

    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        rset/.style={draw=orange!70, very thick, dashed, rounded corners},
        arc/.style={->, thick, draw=gray!70},
        selected/.style={->, very thick, draw=red!70},
        zero/.style={->, very thick, draw=blue!70}]
      \node[v,fill=red!20] (r) {\small $r$};
      \node[v] (b) [right=1.8cm of r] {\small $b$};
      \node[v] (a) [above=1.2cm of b] {\small $a$};
      \node[v] (c) [below=1.2cm of b] {\small $c$};
      \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};
      \node[v] (d) [right=1.2cm of b] {\small $d$};
      \node[v] (f) [right=1.2cm of d] {\small $f$};
      \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};
      \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize 2} (a);
      \draw[arc] (r) to node[midway, above, sloped] {\scriptsize 1} (b);
      \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize 3} (c);
      \draw[arc] (a) to node[midway, above, sloped] {\scriptsize 3} (b);
      \draw[zero] (b) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_1$}} (c);
      \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 4} (d);
      \draw[arc] (c) to node[midway, above, sloped] {\scriptsize 4} (g);
      \draw[zero] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize \textcolor{blue}{$f_5$}} (f);
      \draw[selected] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize \textcolor{red}{$f_6$}} (e);
      \draw[zero] (d) to node[midway, below, sloped] {\scriptsize \textcolor{blue}{$f_3$}} (g);
      \draw[zero] (e) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_2$}} (a);
      \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize 3} (f);
      \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize 3} (d);
      \draw[zero] (g) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_0$}} (b);
      \draw[zero] (f) to node[midway, below, sloped] {\scriptsize \textcolor{blue}{$f_4$}} (d);
      \node[rset, fit=(e)] {};
      \node[orange!70, above=0.2cm of e] {\small $R_6$};
    \end{tikzpicture}
  \end{columns}
\end{frame}

% \begin{frame}{Fase I: Iteração 9 - Redução de Pesos}
%   \begin{columns}[c]
%     \column{0.48\textwidth}
%     \textbf{Estado:} $F = \{(g,b), (b,c), (e,a), (d,g), (f,d), (c,f), (d,e)\}$

%     \vspace{0.2cm}

%     \textbf{Escolha:} $R_7 = \{e\}$

%     \vspace{0.2cm}
%     Arcos que entram em $\{e\}$:
%     \begin{itemize}
%       \item $(d,e): 4$ ← \textbf{mínimo}
%     \end{itemize}

%     \vspace{0.2cm}
%     \textbf{Seleção:}
%     \begin{itemize}
%       \item $\lambda_7 = 4$
%       \item $f_7 = (d,e)$
%     \end{itemize}

%     \column{0.52\textwidth}
%     \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
%         v/.style={circle, draw, fill=blue!8, minimum size=7mm},
%         rset/.style={draw=orange!70, very thick, dashed, rounded corners},
%         arc/.style={->, thick, draw=gray!70},
%         selected/.style={->, very thick, draw=green!70},
%         zero/.style={->, very thick, draw=blue!70}]
%       \node[v,fill=red!20] (r) {\small $r$};
%       \node[v] (b) [right=1.8cm of r] {\small $b$};
%       \node[v] (a) [above=1.2cm of b] {\small $a$};
%       \node[v] (c) [below=1.2cm of b] {\small $c$};

%       \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};

%       \node[v] (d) [right=1.2cm of b] {\small $d$};

%       \node[v] (f) [right=1.2cm of d] {\small $f$};

%       \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};

%       \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize 2} (a);
%       \draw[arc] (r) to node[midway, above, sloped] {\scriptsize 1} (b);
%       \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize 3} (c);


%       \draw[arc] (a) to node[midway, above, sloped] {\scriptsize 3} (b);


%       \draw[zero] (b) to node[midway, above, sloped] {\scriptsize 0} (c);
%       \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 4} (d);

%       \draw[arc] (c) to node[midway, above, sloped] {\scriptsize 4} (g);
%       \draw[zero] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize 0} (f);

%       \draw[selected] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize \textcolor{green} 4} (e);
%       \draw[zero] (d) to node[midway, below, sloped] {\scriptsize 0} (g);

%       \draw[zero] (e) to node[midway, above, sloped] {\scriptsize 0} (a);
%       \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize 3} (f);
%       \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize 3} (d);

%       \draw[zero] (g) to node[midway, above, sloped] {\scriptsize 0} (b);

%       \draw[zero] (f) to node[midway, below, sloped] {\scriptsize 0} (d);

%       \node[rset, fit=(e)] {};
%       \node[orange!70, above=0.2cm of e] {\small $R_5$};

%     \end{tikzpicture}
%   \end{columns}
% \end{frame}

\begin{frame}{Fase I: Iteração 9 - Estado Final}
  \begin{columns}[c]
    \column{0.48\textwidth}

    \textbf{Redução:}
    \begin{itemize}
      \item $c(r,b) = 1 - 1 = 0$
    \end{itemize}


    \vspace{0.2cm}
    \textbf{Condição de parada satisfeita!}

    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        rset/.style={draw=orange!70, very thick, dashed, rounded corners},
        arc/.style={->, thick, draw=gray!70},
        selected/.style={->, very thick, draw=red!70},
        zero/.style={->, very thick, draw=blue!70}]
      \node[v,fill=red!20] (r) {\small $r$};
      \node[v] (b) [right=1.8cm of r] {\small $b$};
      \node[v] (a) [above=1.2cm of b] {\small $a$};
      \node[v] (c) [below=1.2cm of b] {\small $c$};
      \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};
      \node[v] (d) [right=1.2cm of b] {\small $d$};
      \node[v] (f) [right=1.2cm of d] {\small $f$};
      \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};
      \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize \textcolor{red} 2} (a);
      \draw[selected] (r) to node[midway, above, sloped] {\scriptsize \textcolor{red} {$f_7$}} (b);
      \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize \textcolor{red} 3} (c);
      \draw[arc] (a) to node[midway, above, sloped] {\scriptsize  3} (b);
      \draw[zero] (b) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_1$}} (c);
      \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 4} (d);
      \draw[arc] (c) to node[midway, above, sloped] {\scriptsize 4} (g);
      \draw[zero] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize \textcolor{blue}{$f_5$}} (f);
      \draw[zero] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_6$}} (e);
      \draw[zero] (d) to node[midway, below, sloped] {\scriptsize \textcolor{blue}{$f_3$}} (g);
      \draw[zero] (e) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_2$}} (a);
      \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize 3} (f);
      \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize 3} (d);
      \draw[zero] (g) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_0$}} (b);
      \draw[zero] (f) to node[midway, below, sloped] {\scriptsize \textcolor{blue}{$f_4$}} (d);
    \end{tikzpicture}

    {\small Todos arcos de $F$ têm peso zero!}
  \end{columns}
  % \begin{block}{Sequência devolvida}
  %   $\sigma = [(f_0=(r,a), R_0=\{a\}, \lambda_0=3), (f_1=(a,b), R_1=\{b\}, \lambda_1=3), (f_2=(b,c), R_2=\{c\}, \lambda_2=2)]$
  % \end{block}
\end{frame}

\begin{frame}{Final da Fase I}
  \begin{columns}[c]
    \column{0.50\textwidth}
    \textbf{Devolução da fase I:}
    \begin{itemize}
      \item $F = \{(g,b), (b,c), (e,a), (d,g),$

            $(f,d), (c,f), (d,e), (r,b)\}$
      \item Todos arcos em $F$ têm peso zero
    \end{itemize}

    \column{0.50\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        rset/.style={draw=orange!70, very thick, dashed, rounded corners},
        arc/.style={->, thick, draw=gray!70},
        selected/.style={->, very thick, draw=green!70},
        zero/.style={->, very thick, draw=blue!70}]
      \node[v,fill=red!20] (r) {\small $r$};
      \node[v] (b) [right=1.8cm of r] {\small $b$};
      \node[v] (a) [above=1.2cm of b] {\small $a$};
      \node[v] (c) [below=1.2cm of b] {\small $c$};
      \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};
      \node[v] (d) [right=1.2cm of b] {\small $d$};
      \node[v] (f) [right=1.2cm of d] {\small $f$};
      \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};
      % \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize 1} (a);
      \draw[zero] (r) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_7$}} (b);
      % \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize 2} (c);
      % \draw[arc] (a) to node[midway, above, sloped] {\scriptsize 3} (b);
      \draw[zero] (b) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_1$}} (c);
      % \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 4} (d);
      % \draw[arc] (c) to node[midway, above, sloped] {\scriptsize 4} (g);
      \draw[zero] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize \textcolor{blue}{$f_5$}} (f);
      \draw[zero] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_6$}} (e);
      \draw[zero] (d) to node[midway, below, sloped] {\scriptsize \textcolor{blue}{$f_3$}} (g);
      \draw[zero] (e) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_2$}} (a);
      % \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize 3} (f);
      % \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize 3} (d);
      \draw[zero] (g) to node[midway, above, sloped] {\scriptsize \textcolor{blue}{$f_0$}} (b);
      \draw[zero] (f) to node[midway, below, sloped] {\scriptsize \textcolor{blue}{$f_4$}} (d);
    \end{tikzpicture}
  \end{columns}

  \begin{alertblock}{Observação}
    Fase II precisa considerar \textbf{todos} arcos de $D$, não apenas $F$.
  \end{alertblock}
\end{frame}

\begin{frame}{Intermissão}
  \begin{center}
    \LARGE
    Fase II: Duas Abordagens
  \end{center}
\end{frame}

\begin{frame}{Fase II: Construção da Arborescência}
  \textbf{Entrada:} Sequência $(f_i)_{i \in [k)}$ da Fase I

  \textbf{Objetivo:} Extrair $J \subseteq \{f_i : i \in [k)\}$ que é uma $r$-arborescência geradora

  \textbf{Algoritmo guloso:}
  \begin{enumerate}
    \item Iniciar com $U := \{r\}$ e $J := \emptyset$
    \item Para $t = 1$ até $|V|-1$:
          \begin{itemize}
            \item Para cada $f_i = (u_i, v_i)$ na sequência:
            \item Se $u_i \in U$ e $v_i \notin U$:
                  \begin{itemize}
                    \item $U := U \cup \{v_i\}$
                    \item $J := J \cup \{f_i\}$
                    \item Passar para próxima iteração
                  \end{itemize}
            \item Devolver $J$ ao final
          \end{itemize}
  \end{enumerate}
  \begin{block}{Invariante}
    Em cada iteração, $\varrho_J(R_i) \le 1$ para todo $i \in [k)$
  \end{block}
\end{frame}

\begin{frame}{Fase II - Entrada}
  \begin{columns}[c]
    \column{0.48\textwidth}
    \textbf{Entrada da Fase II:}
    \begin{itemize}
      \item $F = \{(g,b), (b,c), (e,a), (d,g),$

            $(f,d), (c,f), (d,e), (r,b)\}$
    \end{itemize}

    \vspace{0.2cm}
    \textbf{Estado inicial:}
    \begin{itemize}
      \item $U = \{r\}$ (alcançados)
      \item $J = \emptyset$ (arborescência)
    \end{itemize}

    \vspace{0.2cm}
    \textbf{Objetivo:}
    \begin{itemize}
      \item Selecionar $|V|-1 = 7$ arcos
      \item Manter propriedade de arborescência
    \end{itemize}

    \column{0.45\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        rset/.style={draw=orange!70, very thick, dashed, rounded corners},
        arc/.style={->, thick, draw=gray!70},
        selected/.style={->, very thick, draw=green!70},
        zero/.style={->, very thick, draw=gray!70}]
      \node[v,fill=red!20] (r) {\small $r$};
      \node[v] (b) [right=1.8cm of r] {\small $b$};
      \node[v] (a) [above=1.2cm of b] {\small $a$};
      \node[v] (c) [below=1.2cm of b] {\small $c$};
      \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};
      \node[v] (d) [right=1.2cm of b] {\small $d$};
      \node[v] (f) [right=1.2cm of d] {\small $f$};
      \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};
      % \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize 1} (a);
      \draw[zero] (r) to node[midway, above, sloped] {\scriptsize $f_7$} (b);
      % \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize 2} (c);
      % \draw[arc] (a) to node[midway, above, sloped] {\scriptsize 3} (b);
      \draw[zero] (b) to node[midway, above, sloped] {\scriptsize $f_1$} (c);
      % \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 4} (d);
      % \draw[arc] (c) to node[midway, above, sloped] {\scriptsize 4} (g);
      \draw[zero] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize $f_5$} (f);
      \draw[zero] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize $f_6$} (e);
      \draw[zero] (d) to node[midway, below, sloped] {\scriptsize $f_3$} (g);
      \draw[zero] (e) to node[midway, above, sloped] {\scriptsize $f_2$} (a);
      % \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize 3} (f);
      % \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize 3} (d);
      \draw[zero] (g) to node[midway, above, sloped] {\scriptsize $f_0$} (b);
      \draw[zero] (f) to node[midway, below, sloped] {\scriptsize $f_4$} (d);
    \end{tikzpicture}
  \end{columns}

  \begin{alertblock}{Observação}
    Fase II precisa considerar \textbf{todos} arcos de $D$, não apenas $F$.
  \end{alertblock}
\end{frame}



\ifshowimplementation
  \begin{frame}[fragile]{Fase II: Implementação - Versão Lista}
    \textbf{Versão 1: Iteração sobre lista}

    \begin{lstlisting}[basicstyle=\tiny\ttfamily]
def phase2(D: nx.DiGraph, r: int, 
           F: list[tuple[int, int]]):
    Arb = nx.DiGraph()
    Arb.add_node(r)
    n = len(D.nodes())
    
    for _ in range(n - 1):
        for u, v in F:
            if u in Arb.nodes() and v not in Arb.nodes():
                edge_data = D.get_edge_data(u, v)
                Arb.add_edge(u, v, **edge_data)
                break
    
    return Arb
\end{lstlisting}

    \vspace{0.05cm}
    {\small \textbf{Complexidade:} $O(|V||F|) = O(|V|^2)$ pois $|F| \le 2|V|-1$}
  \end{frame}
\fi

\ifshowimplementation
  \begin{frame}[fragile]{Fase II: Implementação - Versão Heap}
    \textbf{Versão 2: Usando fila de prioridade (estilo Dijkstra)}

    \begin{lstlisting}[basicstyle=\tiny\ttfamily]
def phase2_v2(D, r, F):
    Arb = nx.DiGraph()
    for i, (u, v) in enumerate(F):
        Arb.add_edge(u, v, w=i)  # prioridade = indice
    
    V = {r}
    q = []
    for u, v, data in Arb.out_edges(r, data=True):
        heapq.heappush(q, (data["w"], u, v))
    
    J = nx.DiGraph()
    while q:
        _, u, v = heapq.heappop(q)
        if v in V: continue
        J.add_edge(u, v, w=D[u][v]["w"])
        V.add(v)
        for x, y, data in Arb.out_edges(v, data=True):
            heapq.heappush(q, (data["w"], x, y))
    return J
\end{lstlisting}

    \vspace{0.05cm}
    {\small \textbf{Complexidade:} $O(|V| \log |V|)$ usando heap binário}
  \end{frame}
\fi

\ifshowimplementation
  \begin{frame}[fragile]{Algoritmo Completo de Frank}
    \textbf{Composição das duas fases:}
    \begin{lstlisting}[basicstyle=\scriptsize\ttfamily]
def andras_frank(D: nx.DiGraph, r: int):
    # Fase I: construir cobertura
    sigma = phase1(D, r)
    F = [f for f, _, _ in sigma]
    # Fase II: extrair arborescencia
    J = phase2_v2(D, r, F)
    return J
\end{lstlisting}
    \begin{block}{Complexidade Total}
      \begin{itemize}
        \item Fase I: $O(|V||A|)$
        \item Fase II: $O(|V| \log |V|)$ (heap)
        \item \textbf{Total}: $O(|V|(|A| + \log |V|))$
      \end{itemize}
    \end{block}

    {\small A Fase II é significativamente mais rápida usando heap do que lista!}
  \end{frame}
\fi



\begin{frame}{Fase II: Iteração 1}
  \begin{columns}[c]
    \column{0.48\textwidth}
    \textbf{Estado:} $U = \{r\}$, $J = \emptyset$

    \vspace{0.2cm}
    \textbf{Procurar em $F$:}
    \begin{itemize}
      \item $f_7=(r,b)$: $r \in U$, $b \notin U$ \checkmark
    \end{itemize}

    \vspace{0.2cm}
    \textbf{Ação:}
    \begin{itemize}
      \item Adicionar $(r,b)$ a $J$
      \item $U := U \cup \{b\} = \{r,b\}$
    \end{itemize}

    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        rset/.style={draw=orange!70, very thick, dashed, rounded corners},
        arc/.style={->, thick, draw=gray!70},
        selected/.style={->, very thick, draw=blue!70},
        zero/.style={->, very thick, draw=gray!70}]
      \node[v,fill=red!20] (r) {\small $r$};
      \node[v] (b) [right=1.8cm of r] {\small $b$};
      \node[v] (a) [above=1.2cm of b] {\small $a$};
      \node[v] (c) [below=1.2cm of b] {\small $c$};

      \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};

      \node[v] (d) [right=1.2cm of b] {\small $d$};

      \node[v] (f) [right=1.2cm of d] {\small $f$};

      \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};

      % \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize 1} (a);
      \draw[selected] (r) to node[midway, above, sloped] {\scriptsize \textcolor{blue!80}{$f_7$}} (b);
      % \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize 2} (c);
      % \draw[arc] (a) to node[midway, above, sloped] {\scriptsize 3} (b);


      \draw[zero] (b) to node[midway, above, sloped] {\scriptsize $f_1$} (c);
      % \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 4} (d);

      % \draw[arc] (c) to node[midway, above, sloped] {\scriptsize 4} (g);
      \draw[zero] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize $f_5$} (f);

      \draw[zero] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize $f_6$} (e);
      \draw[zero] (d) to node[midway, below, sloped] {\scriptsize $f_3$} (g);

      \draw[zero] (e) to node[midway, above, sloped] {\scriptsize $f_2$} (a);
      % \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize 3} (f);
      % \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize 3} (d);

      \draw[zero] (g) to node[midway, above, sloped] {\scriptsize $f_0$} (b);

      \draw[zero] (f) to node[midway, below, sloped] {\scriptsize $f_4$} (d);
    \end{tikzpicture}

    {\small $J = \{(r,b)\}$, peso = 6}
  \end{columns}
\end{frame}

\begin{frame}{Fase II: Iteração 2}
  \begin{columns}[c]
    \column{0.48\textwidth}
    \textbf{Estado:} $U = \{r,b\}$

    \vspace{0.2cm}
    \textbf{Procurar em $F$:}
    \begin{itemize}
      \item $f_1=(b,c)$: $b \in U$, $c \notin U$ \checkmark
    \end{itemize}

    \vspace{0.2cm}
    \textbf{Ação:}
    \begin{itemize}
      \item Adicionar $(b,c)$ a $J$
      \item $U := U \cup \{c\} = \{r,b,c\}$
    \end{itemize}

    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        vs/.style={circle, draw, fill=orange!18, minimum size=7mm},
        rset/.style={draw=orange!70, very thick, dashed, rounded corners},
        arc/.style={->, thick, draw=gray!70},
        selected/.style={->, very thick, draw=blue!70},
        zero/.style={->, very thick, draw=gray!70}]
      \node[v,fill=red!20] (r) {\small $r$};
      \node[vs] (b) [right=1.8cm of r] {\small $b$};
      \node[v] (a) [above=1.2cm of b] {\small $a$};
      \node[v] (c) [below=1.2cm of b] {\small $c$};

      \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};

      \node[v] (d) [right=1.2cm of b] {\small $d$};

      \node[v] (f) [right=1.2cm of d] {\small $f$};

      \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};

      % \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize 1} (a);
      \draw[selected] (r) to node[midway, above, sloped] {\scriptsize \textcolor{blue!80}{$f_7$}} (b);
      % \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize 2} (c);
      % \draw[arc] (a) to node[midway, above, sloped] {\scriptsize 3} (b);

      \draw[zero] (b) to node[midway, above, sloped] {\scriptsize $f_1$} (c);
      % \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 4} (d);

      % \draw[arc] (c) to node[midway, above, sloped] {\scriptsize 4} (g);
      \draw[zero] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize $f_5$} (f);

      \draw[zero] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize $f_6$} (e);
      \draw[zero] (d) to node[midway, below, sloped] {\scriptsize $f_3$} (g);

      \draw[zero] (e) to node[midway, above, sloped] {\scriptsize $f_2$} (a);
      % \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize 3} (f);
      % \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize 3} (d);

      \draw[zero] (g) to node[midway, above, sloped] {\scriptsize $f_0$} (b);

      \draw[zero] (f) to node[midway, below, sloped] {\scriptsize $f_4$} (d);
    \end{tikzpicture}

    {\small $J = \{(r,b), (b,c)\}$, peso = 8}
  \end{columns}
\end{frame}

\begin{frame}{Fase II: Iteração 3}
  \begin{columns}[c]
    \column{0.48\textwidth}
    \textbf{Estado:} $U = \{r,b,c\}$

    \vspace{0.2cm}
    \textbf{Procurar em $F$:}
    \begin{itemize}
      \item $f_5=(c,f)$: $c \in U$, $f \notin U$ \checkmark
    \end{itemize}

    \vspace{0.2cm}
    \textbf{Ação:}
    \begin{itemize}
      \item Adicionar $(c,f)$ a $J$
      \item $U := U \cup \{f\} = \{r,b,c,f\}$
    \end{itemize}

    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        vs/.style={circle, draw, fill=orange!18, minimum size=7mm},
        rset/.style={draw=orange!70, very thick, dashed, rounded corners},
        arc/.style={->, thick, draw=gray!70},
        selected/.style={->, very thick, draw=blue!70},
        zero/.style={->, very thick, draw=gray!70}]
      \node[v,fill=red!20] (r) {\small $r$};
      \node[vs] (b) [right=1.8cm of r] {\small $b$};
      \node[v] (a) [above=1.2cm of b] {\small $a$};
      \node[v] (c) [below=1.2cm of b] {\small $c$};

      \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};

      \node[v] (d) [right=1.2cm of b] {\small $d$};

      \node[v] (f) [right=1.2cm of d] {\small $f$};

      \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};

      % \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize 1} (a);
      \draw[selected] (r) to node[midway, above, sloped] {\scriptsize \textcolor{blue!80}{$f_7$}} (b);
      % \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize 2} (c);
      % \draw[arc] (a) to node[midway, above, sloped] {\scriptsize 3} (b);


      \draw[selected] (b) to node[midway, above, sloped] {\scriptsize \textcolor{blue!80}{$f_1$}} (c);
      % \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 4} (d);

      % \draw[arc] (c) to node[midway, above, sloped] {\scriptsize 4} (g);
      \draw[zero] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize $f_5$} (f);

      \draw[zero] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize $f_6$} (e);
      \draw[zero] (d) to node[midway, below, sloped] {\scriptsize $f_3$} (g);

      \draw[zero] (e) to node[midway, above, sloped] {\scriptsize $f_2$} (a);
      % \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize 3} (f);
      % \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize 3} (d);

      \draw[zero] (g) to node[midway, above, sloped] {\scriptsize $f_0$} (b);

      \draw[zero] (f) to node[midway, below, sloped] {\scriptsize $f_4$} (d);
    \end{tikzpicture}

    {\small $J = \{(r,b), (b,c), (c,f)\}$, peso = 11}
  \end{columns}
\end{frame}

\begin{frame}{Fase II: Iteração 4}
  \begin{columns}[c]
    \column{0.48\textwidth}
    \textbf{Estado:} $U = \{r,b,c,f\}$

    \vspace{0.2cm}
    \textbf{Procurar em $F$:}
    \begin{itemize}
      \item $f_4=(f,d)$: $f \in U$, $d \notin U$ \checkmark
    \end{itemize}

    \vspace{0.2cm}
    \textbf{Ação:}
    \begin{itemize}
      \item Adicionar $(f,d)$ a $J$
      \item $U := U \cup \{d\} = \{r,b,c,f,d\}$
    \end{itemize}

    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        vs/.style={circle, draw, fill=orange!18, minimum size=7mm},
        rset/.style={draw=orange!70, very thick, dashed, rounded corners},
        arc/.style={->, thick, draw=gray!70},
        selected/.style={->, very thick, draw=blue!70},
        zero/.style={->, very thick, draw=gray!70}]
      \node[v,fill=red!20] (r) {\small $r$};
      \node[v] (b) [right=1.8cm of r] {\small $b$};
      \node[v] (a) [above=1.2cm of b] {\small $a$};
      \node[v] (c) [below=1.2cm of b] {\small $c$};

      \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};

      \node[v] (d) [right=1.2cm of b] {\small $d$};

      \node[v] (f) [right=1.2cm of d] {\small $f$};

      \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};

      % \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize 1} (a);
      \draw[selected] (r) to node[midway, above, sloped] {\scriptsize \textcolor{blue!80}{$f_7$}} (b);
      % \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize 2} (c);
      % \draw[arc] (a) to node[midway, above, sloped] {\scriptsize 3} (b);


      \draw[selected] (b) to node[midway, above, sloped] {\scriptsize \textcolor{blue!80}{$f_1$}} (c);
      % \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 4} (d);

      % \draw[arc] (c) to node[midway, above, sloped] {\scriptsize 4} (g);
      \draw[selected] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize \textcolor{blue!80}{$f_5$}} (f);

      \draw[zero] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize $f_6$} (e);
      \draw[zero] (d) to node[midway, below, sloped] {\scriptsize $f_3$} (g);

      \draw[zero] (e) to node[midway, above, sloped] {\scriptsize $f_2$} (a);
      % \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize 3} (f);
      % \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize 3} (d);

      \draw[zero] (g) to node[midway, above, sloped] {\scriptsize $f_0$} (b);

      \draw[selected] (f) to node[midway, below, sloped] {\scriptsize \textcolor{blue!80}{$f_4$}} (d);
    \end{tikzpicture}

    {\small $J = \{(r,b), (b,c), (c,f), (f,d)\}$, peso = 12}
  \end{columns}
\end{frame}

\begin{frame}{Fase II: Iteração 5}
  \begin{columns}[c]
    \column{0.48\textwidth}
    \textbf{Estado:} $U = \{r,b,c,f,d\}$

    \vspace{0.2cm}
    \textbf{Procurar em $F$:}
    \begin{itemize}
      \item $f_3=(d,g)$: $d \in U$, $g \notin U$ \checkmark
    \end{itemize}

    \vspace{0.2cm}
    \textbf{Ação:}
    \begin{itemize}
      \item Adicionar $(d,g)$ a $J$
      \item $U := U \cup \{g\} = \{r,b,c,f,d,g\}$
    \end{itemize}

    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        vs/.style={circle, draw, fill=orange!18, minimum size=7mm},
        rset/.style={draw=orange!70, very thick, dashed, rounded corners},
        arc/.style={->, thick, draw=gray!70},
        selected/.style={->, very thick, draw=blue!70},
        zero/.style={->, very thick, draw=gray!70}]
      \node[v,fill=red!20] (r) {\small $r$};
      \node[v] (b) [right=1.8cm of r] {\small $b$};
      \node[v] (a) [above=1.2cm of b] {\small $a$};
      \node[v] (c) [below=1.2cm of b] {\small $c$};

      \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};

      \node[v] (d) [right=1.2cm of b] {\small $d$};

      \node[v] (f) [right=1.2cm of d] {\small $f$};

      \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};

      % \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize 1} (a);
      \draw[selected] (r) to node[midway, above, sloped] {\scriptsize \textcolor{blue!80}{$f_7$}} (b);
      % \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize 2} (c);
      % \draw[arc] (a) to node[midway, above, sloped] {\scriptsize 3} (b);


      \draw[selected] (b) to node[midway, above, sloped] {\scriptsize \textcolor{blue!80}{$f_1$}} (c);
      % \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 4} (d);

      % \draw[arc] (c) to node[midway, above, sloped] {\scriptsize 4} (g);
      \draw[selected] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize \textcolor{blue!80}{$f_5$}} (f);

      \draw[zero] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize $f_6$} (e);
      \draw[selected] (d) to node[midway, below, sloped] {\scriptsize \textcolor{blue!80}{$f_3$}} (g);

      \draw[zero] (e) to node[midway, above, sloped] {\scriptsize $f_2$} (a);
      % \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize 3} (f);
      % \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize 3} (d);

      \draw[zero] (g) to node[midway, above, sloped] {\scriptsize $f_0$} (b);

      \draw[selected] (f) to node[midway, below, sloped] {\scriptsize \textcolor{blue!80}{$f_4$}} (d);
    \end{tikzpicture}

    {\small $J = \{(r,b), (b,c), (c,f), (f,d), (d,g)\}$, \\ peso = 16}
  \end{columns}
\end{frame}

\begin{frame}{Fase II: Iteração 6}
  \begin{columns}[c]
    \column{0.48\textwidth}
    \textbf{Estado:} $U = \{r,b,c,f,d,g\}$

    \vspace{0.2cm}
    \textbf{Procurar em $F$:}
    \begin{itemize}
      \item $f_6=(d,e)$: $d \in U$, $e \notin U$ \checkmark
    \end{itemize}

    \vspace{0.2cm}
    \textbf{Ação:}
    \begin{itemize}
      \item Adicionar $(d,e)$ a $J$
      \item $U := U \cup \{e\} = \{r,b,c,f,d,g,e\}$
    \end{itemize}

    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        vs/.style={circle, draw, fill=orange!18, minimum size=7mm},
        rset/.style={draw=orange!70, very thick, dashed, rounded corners},
        arc/.style={->, thick, draw=gray!70},
        selected/.style={->, very thick, draw=blue!70},
        zero/.style={->, very thick, draw=gray!70}]
      \node[v,fill=red!20] (r) {\small $r$};
      \node[v] (b) [right=1.8cm of r] {\small $b$};
      \node[v] (a) [above=1.2cm of b] {\small $a$};
      \node[v] (c) [below=1.2cm of b] {\small $c$};

      \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};

      \node[v] (d) [right=1.2cm of b] {\small $d$};

      \node[v] (f) [right=1.2cm of d] {\small $f$};

      \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};

      % \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize 1} (a);
      \draw[selected] (r) to node[midway, above, sloped] {\scriptsize \textcolor{blue!80}{$f_7$}} (b);
      % \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize 2} (c);
      % \draw[arc] (a) to node[midway, above, sloped] {\scriptsize 3} (b);


      \draw[selected] (b) to node[midway, above, sloped] {\scriptsize \textcolor{blue!80}{$f_1$}} (c);
      % \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 4} (d);

      % \draw[arc] (c) to node[midway, above, sloped] {\scriptsize 4} (g);
      \draw[selected] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize \textcolor{blue!80}{$f_5$}} (f);

      \draw[selected] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize \textcolor{blue!80}{$f_6$}} (e);
      \draw[selected] (d) to node[midway, below, sloped] {\scriptsize \textcolor{blue!80}{$f_3$}} (g);

      \draw[zero] (e) to node[midway, above, sloped] {\scriptsize $f_2$} (a);
      % \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize 3} (f);
      % \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize 3} (d);

      \draw[zero] (g) to node[midway, above, sloped] {\scriptsize $f_0$} (b);

      \draw[selected] (f) to node[midway, below, sloped] {\scriptsize \textcolor{blue!80}{$f_4$}} (d);
    \end{tikzpicture}

    {\small $J = \{(r,b), (b,c), (c,f), (f,d), (d,g), (d,e)\}$, \\ peso = 20}
  \end{columns}
\end{frame}

\begin{frame}{Fase II: Iteração 7 (Interação final)}
  \begin{columns}[c]
    \column{0.48\textwidth}
    \textbf{Estado:} $U = \{r,b,c,f,d,g,e\}$

    \vspace{0.2cm}
    \textbf{Procurar em $F$:}
    \begin{itemize}
      \item $f_2=(e,a)$: $e \in U$, $a \notin U$ \checkmark
    \end{itemize}

    \vspace{0.2cm}
    \textbf{Ação:}
    \begin{itemize}
      \item Adicionar $(e,a)$ a $J$
      \item $U := U \cup \{e\} = \{r,b,c,f,d,g,e,a\}$
    \end{itemize}

    \column{0.52\textwidth}
    \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
        v/.style={circle, draw, fill=blue!8, minimum size=7mm},
        vs/.style={circle, draw, fill=orange!18, minimum size=7mm},
        rset/.style={draw=orange!70, very thick, dashed, rounded corners},
        arc/.style={->, thick, draw=gray!70},
        selected/.style={->, very thick, draw=blue!70},
        zero/.style={->, very thick, draw=gray!70}]
      \node[v,fill=red!20] (r) {\small $r$};
      \node[v] (b) [right=1.8cm of r] {\small $b$};
      \node[v] (a) [above=1.2cm of b] {\small $a$};
      \node[v] (c) [below=1.2cm of b] {\small $c$};

      \node[v] (g) [below right=1.4cm and 1.5cm of b] {\small $g$};

      \node[v] (d) [right=1.2cm of b] {\small $d$};

      \node[v] (f) [right=1.2cm of d] {\small $f$};

      \node[v] (e) [above right=1.2cm and 0.6cm of d] {\small $e$};

      % \draw[arc] (r) to[bend left=13] node[midway, above, sloped] {\scriptsize 1} (a);
      \draw[selected] (r) to node[midway, above, sloped] {\scriptsize \textcolor{blue!80}{$f_7$}} (b);
      % \draw[arc] (r) to[bend right=13] node[midway, below, sloped] {\scriptsize 2} (c);
      % \draw[arc] (a) to node[midway, above, sloped] {\scriptsize 3} (b);


      \draw[selected] (b) to node[midway, above, sloped] {\scriptsize \textcolor{blue!80}{$f_1$}} (c);
      % \draw[arc] (b) to node[midway, above, sloped] {\scriptsize 4} (d);

      % \draw[arc] (c) to node[midway, above, sloped] {\scriptsize 4} (g);
      \draw[selected] (c) to[bend right=70] node[midway, below, sloped] {\scriptsize \textcolor{blue!80}{$f_5$}} (f);

      \draw[selected] (d) to[bend left=14] node[midway, above, sloped] {\scriptsize \textcolor{blue!80}{$f_6$}} (e);
      \draw[selected] (d) to node[midway, below, sloped] {\scriptsize \textcolor{blue!80}{$f_3$}} (g);

      \draw[selected] (e) to node[midway, above, sloped] {\scriptsize \textcolor{blue!80}{$f_2$}} (a);
      % \draw[arc] (e) to[bend left=14] node[midway, above, sloped] {\scriptsize 3} (f);
      % \draw[arc] (e) to[bend left=14] node[midway, below, sloped] {\scriptsize 3} (d);

      \draw[zero] (g) to node[midway, above, sloped] {\scriptsize $f_0$} (b);

      \draw[selected] (f) to node[midway, below, sloped] {\scriptsize \textcolor{blue!80}{$f_4$}} (d);
    \end{tikzpicture}

    {\small $J = \{(r,b), (b,c), (c,f), (f,d), (d,g), (e,a)\}$, \\ peso = 23}
  \end{columns}
\end{frame}


% \begin{frame}{Fase II: Iteração 2}
%   \begin{columns}[c]
%     \column{0.48\textwidth}
%     \textbf{Estado:} $U = \{r,a\}$, $J = \{(r,a)\}$

%     \vspace{0.2cm}
%     \textbf{Procurar em $F$:}
%     \begin{itemize}
%       \item $f_1=(a,b)$: $a \in U$, $b \notin U$ \checkmark
%     \end{itemize}

%     \vspace{0.2cm}
%     \textbf{Ação:}
%     \begin{itemize}
%       \item Adicionar $(a,b)$ a $J$
%       \item $U := U \cup \{b\} = \{r,a,b\}$
%     \end{itemize}

%     \column{0.52\textwidth}
%     \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
%         v/.style={circle, draw, fill=blue!8, minimum size=7mm},
%         inU/.style={circle, draw, fill=green!20, minimum size=7mm},
%         selected/.style={->, very thick, draw=green!70},
%         arc/.style={->, thick, draw=gray!60}]
%       \node[inU,fill=red!20] (r) {\small $r$};
%       \node[inU] (a) [right=2.2cm of r] {\small $a$};
%       \node[inU] (b) [above right=1.2cm and 1.6cm of a] {\small $b$};
%       \node[v] (c) [below right=1.2cm and 1.6cm of a] {\small $c$};

%       \draw[selected] (r) to[bend left=8] node[midway, above, sloped] {\scriptsize 3} (a);
%       \draw[arc] (r) to[bend left=18] node[midway, above, sloped] {\scriptsize 4} (b);
%       \draw[arc] (r) to[bend right=10] node[midway, below, sloped] {\scriptsize 5} (c);
%       \draw[selected] (a) to[bend left=12] node[midway, above, sloped] {\scriptsize 3} (b);
%       \draw[arc] (b) to[bend left=12] node[midway, above, sloped] {\scriptsize 2} (c);
%       \draw[arc] (c) to[bend left=14] node[midway, below, sloped] {\scriptsize 3} (a);
%     \end{tikzpicture}

%     {\small $J = \{(r,a), (a,b)\}$, peso = 6}
%   \end{columns}
% \end{frame}

% \begin{frame}{Fase II: Iteração 3 - Estado Final}
%   \begin{columns}[c]
%     \column{0.48\textwidth}
%     \textbf{Estado:} $U = \{r,a,b\}$, $|J| = 2$

%     \vspace{0.2cm}
%     \textbf{Procurar em $F$:}
%     \begin{itemize}
%       \item $f_2=(b,c)$: $b \in U$, $c \notin U$ \checkmark
%     \end{itemize}

%     \vspace{0.2cm}
%     \textbf{Ação:}
%     \begin{itemize}
%       \item Adicionar $(b,c)$ a $J$
%       \item $U := U \cup \{c\} = V$
%       \item $|J| = 3 = |V|-1$ \checkmark
%     \end{itemize}

%     \column{0.52\textwidth}
%     \begin{tikzpicture}[>=Stealth, node distance=2.0cm, scale=0.9, transform shape,
%         v/.style={circle, draw, fill=blue!8, minimum size=7mm},
%         inU/.style={circle, draw, fill=green!20, minimum size=7mm},
%         selected/.style={->, very thick, draw=green!70}]
%       \node[inU,fill=red!20] (r) {\small $r$};
%       \node[inU] (a) [right=2.2cm of r] {\small $a$};
%       \node[inU] (b) [above right=1.2cm and 1.6cm of a] {\small $b$};
%       \node[inU] (c) [below right=1.2cm and 1.6cm of a] {\small $c$};

%       \draw[->, thick, draw=gray!40] (r) to[bend left=18] node[midway, above, sloped] {\scriptsize 4} (b);
%       \draw[->, thick, draw=gray!40] (r) to[bend right=10] node[midway, below, sloped] {\scriptsize 5} (c);
%       \draw[->, thick, draw=gray!40] (c) to[bend left=14] node[midway, below, sloped] {\scriptsize 3} (a);
%       \draw[selected] (r) to[bend left=8] node[midway, above, sloped] {\scriptsize 3} (a);
%       \draw[selected] (a) to[bend left=12] node[midway, above, sloped] {\scriptsize 3} (b);
%       \draw[selected] (b) to[bend left=12] node[midway, above, sloped] {\scriptsize 2} (c);
%     \end{tikzpicture}

%     {\small $J$ = $r$-arborescência geradora!}
%   \end{columns}

%   \vspace{0.2cm}
%   \begin{exampleblock}{Resultado Final}
%     $J = \{(r,a), (a,b), (b,c)\}$ com peso $w(J) = 3 + 3 + 2 = 8$ (peso mínimo!)
%   \end{exampleblock}
% \end{frame}


\begin{frame}{Intermissão}
  \begin{center}
    \LARGE
    Chu-Liu-Edmonds vs András Frank
  \end{center}
\end{frame}

% ==================== SEÇÃO 4: RESULTADOS ====================
\section{Resultados Experimentais}

\begin{frame}{Comparação de Desempenho}
  \textbf{Experimentos:} 2000 digrafos aleatórios, $|V| = 2000$, $|A| = 4000$

  \vspace{0.3cm}

  \begin{center}
    \begin{tabular}{lcc}
      \toprule
      \textbf{Algoritmo}    & \textbf{Mediana Temporal} & \textbf{Tempo Médio} \\
      \midrule
      Chu-Liu-Edmonds       & 0,13 s                    & 0,25 s               \\
      Frank Fase I          & 4,01 s                    & 4,28 s               \\
      Frank Fase II (lista) & 0,42 s                    & 0,43 s               \\
      Frank Fase II (heap)  & \textbf{0,0083 s}         & \textbf{0,0109 s}    \\
      \bottomrule
    \end{tabular}
  \end{center}

  \vspace{0.5cm}

  \begin{block}{Speedup Fase II}
    Heap vs Lista: aceleração de \textbf{50,94 vezes} (mediana)
  \end{block}
\end{frame}

\begin{frame}{Escalonamento e Consumo de Memória}
  \centering
  \textbf{Escalonamento temporal:}
  \begin{itemize}
    \item Tempo cresce linearmente com o número de arestas
    \item Fase I de Frank domina o tempo total
    \item Fase II (heap) é residual e muito rápida
  \end{itemize}
  \vspace{0.4cm}
  \begin{minipage}{0.48\textwidth}
    \centering
    \includegraphics[width=0.95\textwidth]{figures/fig_times_boxplot.png}
  \end{minipage}
  \hfill
  \begin{minipage}{0.48\textwidth}
    \centering
    \includegraphics[width=0.95\textwidth]{figures/fig_time_vs_edges_scatter.png}
  \end{minipage}
\end{frame}

% \begin{frame}{Características Estruturais}
%     \begin{columns}[c]
%         \column{0.5\textwidth}
%         \textbf{Contrações (Chu-Liu):}
%         \begin{itemize}
%             \item Mediana: 2 contrações
%             \item Média: 6,82
%             \item Máximo: 406
%             \item 93,8\% com $< 20$
%         \end{itemize}
%         \vspace{0.3cm}
%         Muito abaixo do limite teórico $O(n)$
%         \column{0.5\textwidth}
%         \includegraphics[width=\textwidth]{figures/fig_contractions_depth.png}
%     \end{columns}
%     \vspace{0.3cm}
%     \textbf{Tamanho de $D_0$ vs $|V|$:} relação linear confirma $|A_0| = O(|V|)$
%     \includegraphics[width=0.7\textwidth]{figures/fig_d0_edges_vs_vertices.png}
% \end{frame}

\begin{frame}{Principais Resultados}
  \begin{itemize}
    \item \textbf{Corretude validada:} pesos idênticos em todas as instâncias
    \item \textbf{Chu-Liu-Edmonds} mais rápido para construção direta
          \begin{itemize}
            \item Mediana: 0,13 s vs 4,01 s (Fase I Frank)
          \end{itemize}
    \item \textbf{Otimização heap} fundamental na Fase II
          \begin{itemize}
            \item Speedup: 50,94× (mediana), 49,53× (média)
          \end{itemize}
    \item \textbf{Comportamento prático} muito melhor que limites teóricos
          \begin{itemize}
            \item Contrações: mediana 2 (limite $O(n)$)
            \item Memória modesta: 11,5 MB
          \end{itemize}
  \end{itemize}
\end{frame}

\begin{frame}{Conclusões dos Experimentos}
  \begin{itemize}
    \item Equivalência teórica e prática dos algoritmos confirmada
    \item Chu-Liu/Edmonds é mais eficiente
    \item Fase I de Frank é o gargalo computacional
    \item Heap na Fase II traz ganhos práticos expressivos
    \item Algoritmos são escaláveis e viáveis para grandes digrafos
  \end{itemize}

\end{frame}


% ==================== SEÇÃO 5: DIDÁTICA DO ABSTRATO ====================
\section{Didática do Abstrato}

% \begin{frame}{Desafios na Ensino de Algoritmos de Grafos}
% 	\begin{block}{Abstração Excessiva}
% 		\begin{itemize}
% 			\item Dificuldade em visualizar estruturas
% 			\item Compreensão limitada dos passos do algoritmo
% 		\end{itemize}
% 	\end{block}

% 	\vspace{0.5cm}

% 	\begin{alertblock}{Solução Proposta}
% 		Ferramenta interativa para visualização e execução passo a passo
% 	\end{alertblock}
% \end{frame}

\begin{frame}{Intermissão}
  \begin{center}
    \LARGE
    Didática do Abstrato
  \end{center}
\end{frame}
\section{Conclusões}

% Fundamentos Cognitivos e Didáticos
\begin{frame}{Fundamentos Cognitivos e Didáticos}
  \begin{block}{Desafios do Ensino de Matemática Abstrata}
    \begin{itemize}
      \item Conhecimento abstrato exige transitar entre registros: intuitivo, visual, simbólico e formal.
      \item \textbf{Carga cognitiva:}
            \begin{itemize}
              \item Intrínseca: complexidade dos conceitos e pré-requisitos.
              \item Extrínseca: forma de apresentação e coordenação entre texto, fórmulas e figuras.
              \item Pertinente: esforço dedicado à organização dos esquemas mentais.
            \end{itemize}
      \item Combinar representações verbais e visuais reduz sobrecarga e favorece integração semântica.
    \end{itemize}
    \vspace{0.5cm}
  \end{block}
\end{frame}

% Lidando com Grafos e Digrafos
\begin{frame}{Desafios na Ensino de Algoritmos de Grafos}
  \begin{block}{Três Eixos de Dificuldade}
    \begin{enumerate}
      \item \textbf{Decisões locais vs. coerência global:} Escolhas localmente ótimas podem gerar ciclos, dificultando a compreensão da solução global.
      \item \textbf{Contração e expansão:} Transitar entre grafo original, condensado e reexpansão exige rastreabilidade e clareza sobre o que muda e o que permanece.
      \item \textbf{Relação com a teoria primal-dual:} Dificuldade em conectar ações operacionais do algoritmo com fundamentos teóricos e certificados de otimalidade.
    \end{enumerate}
  \end{block}
  \vspace{0.2cm}
  \textbf{Solução:} Visualização e interação bem projetadas facilitam a integração entre prática e teoria.
\end{frame}

% O Ecossistema de Ferramentas Digitais
\begin{frame}{O Ecossistema de Ferramentas para Ensino de Grafos}
  \begin{block}{Categorias de Ferramentas Digitais}
    \begin{itemize}
      \item \textbf{Diagramas programáveis:} Visualização estável e integrada ao texto matemático (\textit{Graphviz}, \textit{TikZ}).
      \item \textbf{Exploração e edição de grafos:} Manipulação gráfica e análise estrutural (\textit{Gephi}, \textit{yEd}, \textit{Cytoscape}).
      \item \textbf{Visualização de algoritmos:} Animações e explicações dinâmicas (\textit{VisuAlgo}).
      \item \textbf{Ambientes programáveis:} Integração de código, texto e visualização para exemplos reprodutíveis (\textit{Jupyter}, \textit{NetworkX}).
    \end{itemize}
  \end{block}
  \vspace{0.2cm}
  Nenhuma ferramenta cobre todos os aspectos didáticos de forma integrada. A aplicação proposta busca preencher essa lacuna.
\end{frame}

% Objetivos da Ferramenta Didática
\begin{frame}{Objetivos da Ferramenta Didática}
  \begin{itemize}
    \item Facilitar a compreensão dos algoritmos Chu-Liu-Edmonds e András Frank
    \item Permitir aos usuários interagir com grafos e observar o funcionamento dos algoritmos
    \item Fornecer feedback imediato sobre as operações realizadas
    \item Ser acessível via navegador web, sem necessidade de instalação
  \end{itemize}
\end{frame}

% ==================== SEÇÃO 6: APLICAÇÃO WEB ====================

\begin{frame}{Intermissão}
  \begin{center}
    \LARGE
    Aplicação Web
  \end{center}
\end{frame}
\section{Aplicação Web}

% \begin{frame}{Aplicação web}
% 	\begin{block}{Desafio}
% 		Algoritmos de grafos são \textbf{abstratos} e \textbf{difíceis de visualizar}
% 	\end{block}

% 	\vspace{0.5cm}

% 	\begin{columns}[c]
% 		\column{0.5\textwidth}
% 		\textbf{Solução Proposta:}
% 		\begin{itemize}
% 			\item Visualização interativa
% 			\item Execução passo a passo
% 			\item Feedback imediato
% 			\item Acessível via navegador
% 		\end{itemize}

% 		\column{0.5\textwidth}
% 		\textbf{Tecnologias:}
% 		\begin{itemize}
% 			\item PyScript (Python no browser)
% 			\item JavaScript
% 			\item HTML5/CSS3
% 			\item NetworkX
% 		\end{itemize}
% 	\end{columns}
% \end{frame}

\begin{frame}{Aplicação web}
  \begin{columns}[c]
    \column{0.52\textwidth}
    \hspace*{0.3cm}
    \begin{minipage}{0.92\columnwidth}
      Ferramenta web interativa para ensino de algoritmos de arborescências dirigidas, permitindo visualização passo a passo, edição livre de grafos e exportação de resultados, com arquitetura modular e foco didático.
    \end{minipage}

    \column{0.46\textwidth}
    \hspace*{0.3cm}
    \begin{minipage}{0.92\columnwidth}
      \begin{alertblock}{Módulos principais:}
        \begin{itemize}
          \item \textbf{Visualização Algorítmica:} Páginas para execução passo a passo dos algoritmos Chu-Liu-Edmonds e András Frank.
          \item \textbf{Modelagem Livre:} Editor sandbox para desenhar, testar e exportar grafos arbitrários.
          \item \textbf{Disseminação Científica:} Página informativa sobre o projeto e a dissertação.
        \end{itemize}
      \end{alertblock}
    \end{minipage}

    \hspace*{0.5cm}
  \end{columns}
\end{frame}

\begin{frame}{Arquitetura da Aplicação}
  \begin{columns}[c]
    \column{0.55\textwidth}
    \textbf{Estrutura em três camadas:}
    \begin{itemize}
      \item \textbf{Apresentação:} Interface construída em HTML5, estilizada com Tailwind CSS e dinamizada por JavaScript.
      \item \textbf{Processamento (PyScript):} Executa algoritmos em Python (NetworkX) diretamente no navegador, gerando visualizações estáticas com Matplotlib.
      \item \textbf{Dados e Persistência:} Utiliza JSON (\texttt{node\_link}) para serializar grafos, armazenar pesos e permitir exportação/importação entre módulos.
    \end{itemize}
    \column{0.45\textwidth}
    \begin{center}
      \begin{tikzpicture}[node distance=0.7cm, box/.style={rectangle,draw,rounded corners,minimum width=2.8cm,minimum height=0.9cm,align=center}]
        \node[box,fill=accentpurple!15] (ui) {Apresentação\\HTML5 + Tailwind + JS};
        \node[box,fill=accentpurple!8,below=of ui] (py) {Processamento\\PyScript + NetworkX};
        \node[box,fill=accentpurple!3,below=of py] (data) {Dados/Persistência\\JSON (\texttt{node\_link})};
        \draw[->,thick] (ui) -- (py);
        \draw[->,thick] (py) -- (data);
        % Seta lateral para evitar sobreposição
        \draw[->,thick] (ui.east) .. controls +(1.2,0) and +(1.2,0) .. (data.east);
      \end{tikzpicture}
    \end{center}
  \end{columns}
\end{frame}


\begin{frame}{Arquitetura da Aplicação}
  \begin{columns}[c]
    \column{0.55\textwidth}
    \textbf{Benefícios:}
    \begin{itemize}
      \item Processamento local e rápido
      \item Facilidade de uso e reprodutibilidade
      \item Modularidade e extensibilidade
    \end{itemize}
    \column{0.45\textwidth}
    \begin{center}
      \begin{tikzpicture}[node distance=0.7cm, box/.style={rectangle,draw,rounded corners,minimum width=2.8cm,minimum height=0.9cm,align=center}]
        \node[box,fill=accentpurple!15] (ui) {Apresentação\\HTML5 + Tailwind + JS};
        \node[box,fill=accentpurple!8,below=of ui] (py) {Processamento\\PyScript + NetworkX};
        \node[box,fill=accentpurple!3,below=of py] (data) {Dados/Persistência\\JSON (\texttt{node\_link})};
        \draw[->,thick] (ui) -- (py);
        \draw[->,thick] (py) -- (data);
        % Seta lateral para evitar sobreposição
        \draw[->,thick] (ui.east) .. controls +(1.2,0) and +(1.2,0) .. (data.east);
      \end{tikzpicture}
    \end{center}
  \end{columns}
\end{frame}

\begin{frame}{Princípios de IHC Aplicados}
  \begin{block}{Fundamentos para o Design da Ferramenta}
    O desenvolvimento da aplicação web foi guiado por oito princípios de Interação Humano-Computador (IHC), integrando heurísticas de usabilidade e teorias de aprendizagem:
  \end{block}
  \vspace{0.3cm}
  \begin{itemize}
    \item \textbf{Usabilidade:} Interface limpa, controles claros e navegação intuitiva.
    \item \textbf{Eficiência cognitiva:} Redução da carga mental, destaque para informações relevantes.
    \item \textbf{Feedback imediato:} Atualização visual e textual em tempo real a cada ação.
    \item \textbf{Engajamento ativo:} Usuário explora, manipula e prediz resultados.
    \item \textbf{Visão geral com detalhe sob demanda}
    \item \textbf{Consistência semântica:} Terminologia e estilos padronizados em toda a interface.
    \item \textbf{Múltiplos registros de representação:} Grafo visual, log textual e parâmetros simbólicos.
    \item \textbf{Prevenção e recuperação de erros}
  \end{itemize}
  \vspace{0.2cm}
  % \textbf{Impacto:} Esses princípios garantem uma experiência didática acessível, eficiente e engajadora, facilitando o aprendizado dos algoritmos de arborescências dirigidas.
\end{frame}


% \begin{frame}{Interface: Página Principal}
%     \begin{figure}
%         \centering \vfill
% 		\includegraphics[width=0.55\textwidth]{../assets/homehtml.png}
%         \vfill 
% 		\vspace{0.8cm}
%     \end{figure}
% \end{frame}

% \begin{frame}{Interface: Desenho de Grafos}
% 	\begin{center}
% 		\includegraphics[width=0.65\textwidth]{../assets/drawhtml.png}
% 	\end{center}
% \end{frame}

% \begin{frame}{Interface: Chu-Liu-Edmonds}
% 	\begin{center}
% 		\includegraphics[width=0.65\textwidth]{../assets/chuliuhtml.png}
% 	\end{center}
% \end{frame}

% \begin{frame}{Interface: András Frank}
% 	\begin{center}
% 		\includegraphics[width=0.65\textwidth]{../assets/andrasfrankv1html.png}
% 	\end{center}
% \end{frame}

% \begin{frame}{Princípios de Design}
% 	\begin{block}{Teoria dos Registros de Representação (Duval)}
% 		Transitar entre diferentes representações:
% 		\begin{itemize}
% 			\item \textbf{Visual:} diagramas do grafo
% 			\item \textbf{Simbólico:} código Python
% 			\item \textbf{Textual:} log das operações
% 		\end{itemize}
% 	\end{block}

% 	\vspace{0.5cm}

% 	\begin{alertblock}{Feedback Imediato}
% 		Validação em tempo real das operações do usuário
% 	\end{alertblock}
% \end{frame}

% ==================== SEÇÃO 7: CONCLUSÕES ====================

\begin{frame}{Intermissão}
  \begin{center}
    \LARGE
    Conclusões
  \end{center}
\end{frame}
\section{Conclusões}

\begin{frame}{Contribuições do Trabalho}
  \begin{enumerate}
    \item \textbf{Implementação completa} de dois algoritmos clássicos
          \begin{itemize}
            \item Chu-Liu-Edmonds: recursivo com contração
            \item András Frank: duas fases com otimização heap
          \end{itemize}

          \vspace{0.3cm}

    \item \textbf{Análise experimental} detalhada
          \begin{itemize}
            \item 2000 instâncias aleatórias
            \item Comparação de desempenho e características estruturais
          \end{itemize}

          \vspace{0.3cm}

    \item \textbf{Aplicação web interativa}
          \begin{itemize}
            \item Ferramenta didática para visualização
            \item Execução passo a passo dos algoritmos
            \item Design centrado no usuário
          \end{itemize}
  \end{enumerate}
\end{frame}


\begin{frame}{Trabalhos Futuros}
  \vspace{0.3cm}
  \begin{columns}[c]
    \column{0.48\textwidth}
    \begin{minipage}{0.95\columnwidth}
      \begin{block}{Extensões Possíveis}
        \begin{itemize}
          \item Implementação de algoritmos para resolver o problema da r-arborescência inversa geradora mínima
          \item Análise em grafos com estruturas especiais
          \item Extensão para grafos dinâmicos
        \end{itemize}
      \end{block}
    \end{minipage}
    \column{0.52\textwidth}
    \begin{minipage}{0.95\columnwidth}
      \begin{block}{Melhorias na Aplicação}
        \begin{itemize}
          \item Modo de edição visual de grafos
          \item Geração automática de casos de teste
          \item Exercícios interativos com correção automática
          \item Integração com plataformas de ensino (Moodle, Jupyter)
        \end{itemize}
      \end{block}
    \end{minipage}
  \end{columns}
  \vspace{0.3cm}
\end{frame}
% ==================== SLIDE ATRIBUIÇÕES ====================
\begin{frame}{Atribuição de Tarefas}
  \begin{block}{Orientador}
    Prof. Dr. Mário Leston Rey
  \end{block}

  \begin{block}{Lorena Silva Sampaio - 11201812025}
    \begin{itemize}
      \item Análise e implementação do Algoritmo de Chu-Liu-Edmonds
      \item Análise e implementação do Algoritmo de András Frank versão com heap
      \item Testes experimentais e análise de desempenho
    \end{itemize}
  \end{block}

  \begin{block}{Samira Haddad - 11201812350}
    \begin{itemize}
      \item Análise e implementação do Algoritmo de András Frank versão com lista
      \item Revisão bibliográfica sobre didática e IHC
      \item Desenvolvimento da interface da aplicação web interativa
    \end{itemize}
  \end{block}
\end{frame}



% ==================== SLIDE FINAL ====================
\begin{frame}[plain]
  \centering
  \vfill

  {\Huge \textcolor{accentpurple}{Obrigado!}}

  \vspace{1cm}

  {\Large Perguntas?}

  \vspace{3cm}

  {\normalsize \textcolor{textlightgray}{\texttt{https://github.com/lorenypsum/graph-visualizer}}}

  \vfill
\end{frame}



\end{document}
